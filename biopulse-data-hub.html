<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioPulse Data Hub - ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        /* CSS ŸÖÿ™ŸÇÿØŸÖ ŸÖÿπ ŸáŸàŸäÿ© ÿ®ÿµÿ±Ÿäÿ© ŸÅÿ±ŸäÿØÿ© */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

        :root {
            --bg-dark: #3a0000;
            --bg-medium: #690000;
            --bg-light: #8b0000;
            --text-light: #ffffff;
            --accent-primary: #ffd700;
            --accent-secondary: #ff6b6b;
            --accent-success: #4caf50;
            --accent-danger: #f44336;
            --accent-warning: #ff9800;
            --border-color: #9e0000;
            --shadow-color: rgba(255, 215, 0, 0.3);
            --glow-color: rgba(255, 215, 0, 0.6);
            --evolution-a: #4caf50;
            --evolution-b: #2196f3;
            --evolution-c: #ff9800;
            --evolution-d: #f44336;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 107, 107, 0.1) 0%, transparent 20%),
                linear-gradient(135deg, #3a0000 0%, #690000 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        body.english {
            direction: ltr;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 107, 107, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: pulseBackground 15s ease-in-out infinite alternate;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            padding: 20px 0;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 20%;
            right: 20%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px var(--shadow-color);
            position: relative;
            display: inline-block;
        }

        h1::after {
            content: 'üß¨';
            position: absolute;
            right: -50px;
            top: 0;
            font-size: 2.5rem;
            animation: pulseIcon 2s infinite;
        }

        body.english h1::after {
            right: auto;
            left: -50px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #ffb3b3;
            margin-bottom: 20px;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--accent-primary);
            position: relative;
            padding-bottom: 10px;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), transparent);
        }

        body.english h2::after {
            right: auto;
            left: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(105, 0, 0, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 20px var(--shadow-color);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .form-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
        }

        .form-section-header {
            font-size: 1.3rem;
            color: var(--accent-secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        body.english .form-section-header {
            flex-direction: row-reverse;
        }

        .form-section-header i {
            margin-left: 10px;
            font-size: 1.5rem;
        }

        body.english .form-section-header i {
            margin-left: 0;
            margin-right: 10px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ffb3b3;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: rgba(58, 0, 0, 0.7);
            color: var(--text-light);
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        body.english input, 
        body.english select, 
        body.english textarea {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }

        body.english .checkbox-group {
            flex-direction: row-reverse;
        }

        .checkbox-group input {
            width: auto;
            margin-left: 10px;
        }

        body.english .checkbox-group input {
            margin-left: 0;
            margin-right: 10px;
        }

        .btn {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: var(--bg-dark);
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-download {
            background: linear-gradient(135deg, var(--accent-success), #2e7d32);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent-danger), #c62828);
        }

        .data-display {
            margin-top: 40px;
        }

        .table-container {
            background: rgba(105, 0, 0, 0.7);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }

        .table-header {
            padding: 20px;
            background: rgba(139, 0, 0, 0.5);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .compounds-grid, .pathogens-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            padding: 20px;
        }

        .compound-card, .pathogen-card {
            background: rgba(139, 0, 0, 0.9);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .compound-card:hover, .pathogen-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4), 0 0 25px var(--shadow-color);
        }

        .compound-card.active, .pathogen-card.active {
            border-color: var(--accent-primary);
            box-shadow: 0 0 15px var(--glow-color);
        }

        .compound-card-header, .pathogen-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }

        .compound-icon, .pathogen-icon {
            font-size: 2.5rem;
            margin-left: 15px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.2);
        }

        body.english .compound-icon, 
        body.english .pathogen-icon {
            margin-left: 0;
            margin-right: 15px;
        }

        .compound-name, .pathogen-name {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--accent-primary);
        }

        .compound-category, .pathogen-category {
            font-size: 1rem;
            color: #ffb3b3;
            margin-top: 5px;
        }

        .compound-details, .pathogen-details {
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .compound-attribute, .pathogen-attribute {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .compound-attribute-label, .pathogen-attribute-label {
            color: #ffb3b3;
        }

        .compound-attribute-value, .pathogen-attribute-value {
            color: var(--accent-primary);
            font-weight: 600;
        }

        .pathogen-compounds, .compound-effects {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .pathogen-compound, .compound-effect {
            background: rgba(255, 107, 107, 0.3);
            color: var(--accent-secondary);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .pathogen-immune-compounds {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .pathogen-immune-compound {
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .d3-tree-container {
            position: relative;
            overflow: auto;
            padding: 20px;
            min-height: 800px;
            background: rgba(139, 0, 0, 0.2);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .evolution-node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .evolution-node rect {
            fill: rgba(139, 0, 0, 0.9);
            stroke: var(--border-color);
            stroke-width: 2px;
            rx: 8;
            ry: 8;
        }

        .evolution-node.original rect {
            fill: rgba(139, 0, 0, 0.9);
            stroke: var(--accent-primary);
        }

        .evolution-node.evolution-a rect {
            fill: rgba(76, 175, 80, 0.9);
            stroke: var(--evolution-a);
        }

        .evolution-node.evolution-b rect {
            fill: rgba(33, 150, 243, 0.9);
            stroke: var(--evolution-b);
        }

        .evolution-node.evolution-c rect {
            fill: rgba(255, 152, 0, 0.9);
            stroke: var(--evolution-c);
        }

        .evolution-node.evolution-d rect {
            fill: rgba(244, 67, 54, 0.9);
            stroke: var(--evolution-d);
        }

        .evolution-node text {
            font-family: 'Cairo', sans-serif;
            font-size: 10px;
            fill: var(--text-light);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            font-weight: 600;
        }

        body.english .evolution-node text {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .evolution-node:hover rect {
            stroke-width: 3px;
            filter: drop-shadow(0 0 5px var(--glow-color));
        }

        .evolution-node.active rect {
            stroke-width: 4px;
            filter: drop-shadow(0 0 8px var(--glow-color));
        }

        .evolution-link {
            fill: none;
            stroke: var(--border-color);
            stroke-width: 2px;
            opacity: 0.7;
        }

        .evolution-description {
            font-size: 10px;
            fill: #ffb3b3;
            text-anchor: middle;
        }

        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .password-modal-content {
            background: var(--bg-medium);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 400px;
            max-width: 90%;
            border: 1px solid var(--border-color);
        }

        .password-modal h3 {
            color: var(--accent-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .password-modal .form-group {
            margin-bottom: 20px;
        }

        .password-modal-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .password-modal-buttons .btn {
            flex: 1;
        }

        .pathogen-detail, .compound-detail {
            background: rgba(105, 0, 0, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .detail-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-icon {
            font-size: 3rem;
            margin-left: 20px;
        }

        body.english .detail-icon {
            margin-left: 0;
            margin-right: 20px;
        }

        .detail-info {
            flex: 1;
        }

        .detail-name {
            font-size: 1.8rem;
            color: var(--accent-primary);
            margin-bottom: 5px;
        }

        .detail-category {
            font-size: 1.1rem;
            color: #ffb3b3;
        }

        .detail-sections {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .detail-section {
            background: rgba(139, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
        }

        .detail-section h3 {
            color: var(--accent-secondary);
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 5px;
        }

        .detail-attributes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .detail-attribute {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .detail-attribute:last-child {
            border-bottom: none;
        }

        .detail-attribute-label {
            color: #ffb3b3;
            font-weight: 600;
            flex: 1;
        }

        .detail-attribute-value {
            color: var(--accent-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: flex-end;
            flex: 1;
        }

        .detail-compounds, .detail-effects {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .detail-compound, .detail-effect {
            background: rgba(255, 107, 107, 0.3);
            color: var(--accent-secondary);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .detail-immune-compounds {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .detail-immune-compound {
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .evolution-info {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .evolution-info.a {
            background: rgba(76, 175, 80, 0.2);
            border-left: 3px solid var(--evolution-a);
        }

        .evolution-info.b {
            background: rgba(33, 150, 243, 0.2);
            border-left: 3px solid var(--evolution-b);
        }

        .evolution-info.c {
            background: rgba(255, 152, 0, 0.2);
            border-left: 3px solid var(--evolution-c);
        }

        .evolution-info.d {
            background: rgba(244, 67, 54, 0.2);
            border-left: 3px solid var(--evolution-d);
        }

        .language-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
        }

        body.english .language-switcher {
            left: auto;
            right: 20px;
        }

        .lang-btn {
            background: rgba(105, 0, 0, 0.8);
            color: var(--accent-primary);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 10px 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .lang-btn:hover {
            background: rgba(139, 0, 0, 0.9);
            transform: translateY(-2px);
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            animation: float 15s infinite linear;
        }

        .floating-element:nth-child(2) {
            width: 60px;
            height: 60px;
            background: rgba(255, 107, 107, 0.1);
            animation-duration: 20s;
            animation-delay: -5s;
        }

        .floating-element:nth-child(3) {
            width: 30px;
            height: 30px;
            background: rgba(76, 175, 80, 0.1);
            animation-duration: 25s;
            animation-delay: -10s;
        }

        .progress-bar {
            height: 5px;
            background: rgba(158, 0, 0, 0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 5px;
            width: 0%;
            animation: progress 2s infinite;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: flex;
            align-items: center;
        }
        /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© - ÿ•ÿ∂ÿßŸÅÿ© ŸÅŸä ŸÜŸáÿßŸäÿ© ÿßŸÑŸÄ CSS */
        @media (max-width: 768px) {
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä */
            .documentation-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 10px;
            }
            
            .enhanced-compound-card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .enhanced-compound-header {
                flex-direction: column;
                text-align: center;
            }
            
            .enhanced-compound-icon {
                margin: 0 auto 15px auto;
                font-size: 2.5rem;
                width: 60px;
                height: 60px;
            }
            
            .enhanced-compound-name {
                font-size: 1.3rem;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¥ÿ®ŸÉÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ */
            .verification-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .verified-compound-card,
            .unverified-compound-card {
                padding: 15px;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ≠ÿßŸÑÿ© */
            .verification-status {
                flex-direction: column;
                gap: 10px;
            }
            
            .status-item {
                width: 100%;
                justify-content: center;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ±ÿ£ÿ≥ ŸÇÿ≥ŸÖ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ */
            .table-header {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .table-header .btn {
                width: 100%;
                margin-top: 10px;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© */
            .form-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .form-section {
                padding: 15px;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ */
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.4rem;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÑŸÖŸäÿ© */
            .scientific-details {
                padding: 10px;
            }
            
            .chemical-formula {
                font-size: 1rem;
                padding: 6px 10px;
            }
            
            .common-names {
                justify-content: center;
            }
            
            .common-name {
                font-size: 0.8rem;
                padding: 3px 8px;
            }
        }

        @media (max-width: 480px) {
            /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑŸáŸàÿßÿ™ŸÅ */
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .header {
                margin-bottom: 20px;
                padding: 15px 0;
            }
            
            .dashboard {
                gap: 20px;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± */
            .btn {
                padding: 10px 15px;
                font-size: 1rem;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ */
            input, select, textarea {
                padding: 10px 12px;
                font-size: 16px; /* ŸÖŸÜÿπ ÿßŸÑÿ™ŸÉÿ®Ÿäÿ± ŸÅŸä iOS */
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± */
            .d3-tree-container {
                min-height: 300px;
                padding: 5px;
            }
            
            .d3-tree-container svg {
                transform: scale(0.5);
                transform-origin: center top;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ±ÿ≥ŸàŸÖÿßÿ™ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© */
            #dangerChart {
                height: 250px;
            }
        }
        .alert-success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid var(--accent-success);
            color: var(--accent-success);
        }

        .alert-error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid var(--accent-danger);
            color: var(--accent-danger);
        }

        .value-group {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
            margin: 2px;
        }

        .value-item {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .value-main {
            font-weight: 700;
            color: var(--accent-primary);
        }

        .value-change {
            font-size: 0.85em;
            padding: 1px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        .value-positive {
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
        }

        .value-negative {
            background: rgba(244, 67, 54, 0.3);
            color: var(--accent-danger);
        }

        .value-neutral {
            background: rgba(255, 152, 0, 0.3);
            color: var(--accent-warning);
        }

        .value-symbol {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .value-separator {
            color: rgba(255, 255, 255, 0.4);
            margin: 0 2px;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .shake {
            animation: shake 0.5s;
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        .slide-in {
            animation: slideIn 0.5s;
        }

        .interactive-element {
            transition: all 0.3s ease;
        }

        .interactive-element:hover {
            transform: scale(1.02);
        }

        .highlight {
            background: rgba(255, 215, 0, 0.2) !important;
            border-color: var(--accent-primary) !important;
        }

        .evolution-summary {
            margin-top: 10px;
            padding: 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            background: rgba(255, 255, 255, 0.1);
        }

        .evolution-summary.a {
            border-left: 3px solid var(--evolution-a);
        }

        .evolution-summary.b {
            border-left: 3px solid var(--evolution-b);
        }

        .evolution-summary.c {
            border-left: 3px solid var(--evolution-c);
        }

        .evolution-summary.d {
            border-left: 3px solid var(--evolution-d);
        }

        .behavior-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .behavior-display {
            background: rgba(139, 0, 0, 0.5);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .auto-verification-section {
            background: rgba(105, 0, 0, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin-top: 40px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .verification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .verification-status {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
        }

        .status-verified {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-success);
            border: 1px solid var(--accent-success);
        }

        .status-unverified {
            background: rgba(255, 152, 0, 0.2);
            color: var(--accent-warning);
            border: 1px solid var(--accent-warning);
        }

        .status-checking {
            background: rgba(33, 150, 243, 0.2);
            color: var(--evolution-b);
            border: 1px solid var(--evolution-b);
        }

        .verified-compounds, .unverified-compounds {
            margin-top: 30px;
        }

        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .verified-compound-card, .unverified-compound-card {
            background: rgba(139, 0, 0, 0.9);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .verified-compound-card {
            border-color: var(--accent-success);
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
        }

        .unverified-compound-card {
            border-color: var(--accent-warning);
            box-shadow: 0 0 15px rgba(255, 152, 0, 0.3);
        }

        .compound-verification-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .verification-icon {
            font-size: 2rem;
            margin-left: 15px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .verified-icon {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-success);
        }

        .unverified-icon {
            background: rgba(255, 152, 0, 0.2);
            color: var(--accent-warning);
        }

        .verification-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .verified-badge {
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
        }

        .unverified-badge {
            background: rgba(255, 152, 0, 0.3);
            color: var(--accent-warning);
        }

        .compound-verification-details {
            margin-top: 10px;
        }

        .verification-property {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding-bottom: 8px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .verification-property:last-child {
            border-bottom: none;
        }

        .property-label {
            color: #ffb3b3;
        }

        .property-value {
            color: var(--accent-primary);
            font-weight: 600;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(58, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            z-index: 10;
        }

        .verification-progress {
            width: 80%;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin-top: 15px;
            overflow: hidden;
        }

        .no-compounds-message {
            text-align: center;
            padding: 40px;
            color: #ffb3b3;
            font-style: italic;
        }

        .warning-box {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid var(--accent-warning);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .warning-box h4 {
            color: var(--accent-warning);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .warning-box h4 i {
            margin-left: 10px;
        }

        body.english .warning-box h4 i {
            margin-left: 0;
            margin-right: 10px;
        }

        .behavior-cell {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 15px;
            transition: all 0.5s ease;
        }

        .scientific-details {
            margin-top: 20px;
            padding: 15px;
            background: rgba(139, 0, 0, 0.3);
            border-radius: 10px;
            border-left: 4px solid var(--accent-primary);
        }

        .chemical-formula {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }

        .compound-description {
            line-height: 1.6;
            margin: 15px 0;
        }

        .pubchem-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(33, 150, 243, 0.2);
            color: var(--evolution-b);
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .pubchem-link:hover {
            background: rgba(33, 150, 243, 0.4);
            transform: translateY(-2px);
        }

        .molecular-structure {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .common-names {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .common-name {
            background: rgba(255, 215, 0, 0.2);
            color: var(--accent-primary);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .search-status {
            font-size: 0.9rem;
            margin-top: 5px;
            padding: 5px 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .search-success {
            color: var(--accent-success);
            border-left: 3px solid var(--accent-success);
        }

        .search-failed {
            color: var(--accent-warning);
            border-left: 3px solid var(--accent-warning);
        }

        .search-error {
            color: var(--accent-danger);
            border-left: 3px solid var(--accent-danger);
        }

        .edit-name-btn {
            background: rgba(255, 152, 0, 0.2);
            color: var(--accent-warning);
            border: 1px solid var(--accent-warning);
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .edit-name-btn:hover {
            background: rgba(255, 152, 0, 0.4);
            transform: translateY(-2px);
        }

        .name-edit-form {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .name-edit-input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--accent-primary);
            border-radius: 5px;
            color: white;
        }

        .name-edit-buttons {
            display: flex;
            gap: 10px;
        }

        .unverified-warning {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid var(--accent-warning);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }

        .unverified-warning h4 {
            color: var(--accent-warning);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .behavior-status {
            font-size: 1.2rem;
        }

        .rank-item {
            display: flex;
            align-items: center;
            background: rgba(139, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .rank-item.rank-1 {
            border-left-color: var(--accent-danger);
        }

        .rank-item.rank-2 {
            border-left-color: var(--accent-warning);
        }

        .rank-item.rank-3 {
            border-left-color: var(--accent-primary);
        }

        .rank-item.rank-4 {
            border-left-color: var(--accent-secondary);
        }

        .rank-number {
            font-size: 1.8rem;
            font-weight: bold;
            margin-left: 15px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .rank-info {
            flex: 1;
        }

        .rank-name {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--accent-primary);
        }

        .rank-score {
            font-size: 0.9rem;
            color: #ffb3b3;
            margin-top: 5px;
        }

        .documentation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
            padding: 20px;
        }

        .enhanced-compound-card {
            background: rgba(139, 0, 0, 0.9);
            border-radius: 15px;
            padding: 25px;
            border: 3px solid var(--accent-success);
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
            position: relative;
            overflow: hidden;
        }

        .enhanced-compound-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 35px rgba(76, 175, 80, 0.4), 0 0 30px var(--glow-color);
        }

        .enhanced-compound-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 15px;
        }

        .enhanced-compound-icon {
            font-size: 3rem;
            margin-left: 20px;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
        }

        .enhanced-compound-name {
            font-weight: 700;
            font-size: 1.6rem;
            color: var(--accent-primary);
            margin-bottom: 8px;
        }

        .enhanced-compound-category {
            font-size: 1.1rem;
            color: var(--accent-success);
            font-weight: 600;
        }

        .enhanced-compound-details {
            margin-top: 20px;
        }

        .enhanced-property {
            display: flex;
            justify-content: space-between;
            margin: 12px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .enhanced-property:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
        }

        .enhanced-property-label {
            color: #ffb3b3;
            font-weight: 600;
            font-size: 1rem;
        }

        .enhanced-property-value {
            color: var(--accent-primary);
            font-weight: 700;
            text-align: left;
        }

        .verified-badge-large {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            background: rgba(76, 175, 80, 0.3);
            color: var(--accent-success);
            border: 2px solid var(--accent-success);
        }

        .structure-title {
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        @keyframes pulseBackground {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        @keyframes pulseIcon {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100px, 100px) rotate(90deg);
            }
            50% {
                transform: translate(200px, 0) rotate(180deg);
            }
            75% {
                transform: translate(100px, -100px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 1100px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

/* ÿ•ÿµŸÑÿßÿ≠ÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                overflow-x: hidden;
            }
            
            .container {
                padding: 0 10px;
                width: 100%;
                max-width: 100%;
            }
            
            .header {
                margin-bottom: 20px;
                padding: 15px 0;
            }
            
            h1 {
                font-size: 1.8rem !important;
                margin-bottom: 8px;
            }
            
            h1::after {
                font-size: 1.8rem !important;
                right: -35px !important;
            }
            
            body.english h1::after {
                left: -35px !important;
                right: auto !important;
            }
            
            .subtitle {
                font-size: 1rem;
                margin-bottom: 15px;
            }
            
            .dashboard {
                grid-template-columns: 1fr !important;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .card {
                padding: 15px !important;
                margin-bottom: 15px;
                border-radius: 12px;
            }
            
            h2 {
                font-size: 1.4rem !important;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr !important;
                gap: 12px;
            }
            
            .form-section {
                margin-bottom: 20px;
                padding-bottom: 12px;
            }
            
            .form-section-header {
                font-size: 1.1rem;
                margin-bottom: 12px;
            }
            
            input, select, textarea {
                padding: 10px 12px;
                font-size: 16px; /* ŸÖŸÜÿπ ÿßŸÑÿ™ŸÉÿ®Ÿäÿ± ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÅŸä iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 1rem;
                width: 100%;
                margin-bottom: 8px;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿ±ÿ£ÿ≥ ÿßŸÑÿ¨ÿØÿßŸàŸÑ */
            .table-header {
                flex-direction: column;
                align-items: stretch;
                padding: 15px;
            }
            
            .table-header h2 {
                margin-bottom: 15px;
                text-align: center;
            }
            
            .table-header div {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿßŸÑÿ¥ÿ®ŸÉÿßÿ™ */
            .compounds-grid, .pathogens-grid {
                grid-template-columns: 1fr !important;
                gap: 15px;
                padding: 15px;
            }
            
            .compound-card, .pathogen-card {
                padding: 15px;
                margin-bottom: 10px;
            }
            
            .compound-card-header, .pathogen-card-header {
                flex-direction: column;
                text-align: center;
                margin-bottom: 12px;
            }
            
            .compound-icon, .pathogen-icon {
                margin: 0 auto 10px auto !important;
                font-size: 2rem;
                width: 45px;
                height: 45px;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ŸÇÿ≥ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä */
            .auto-verification-section {
                padding: 15px;
                margin-top: 20px;
            }
            
            .verification-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .verification-status {
                flex-direction: column;
                gap: 10px;
            }
            
            .status-item {
                width: 100%;
                justify-content: center;
            }
            
            .verification-grid {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }
            
            .verified-compound-card, .unverified-compound-card {
                padding: 15px;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ */
            .documentation-grid {
                grid-template-columns: 1fr !important;
                gap: 15px;
                padding: 15px;
            }
            
            .enhanced-compound-card {
                padding: 15px;
            }
            
            .enhanced-compound-header {
                flex-direction: column;
                text-align: center;
            }
            
            .enhanced-compound-icon {
                margin: 0 auto 15px auto !important;
                font-size: 2.5rem;
                width: 60px;
                height: 60px;
            }
            
            .enhanced-compound-name {
                font-size: 1.3rem;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ© */
            .pathogen-detail, .compound-detail {
                padding: 15px;
                margin-top: 15px;
            }
            
            .detail-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .detail-icon {
                margin: 0 auto !important;
                font-size: 2.5rem;
            }
            
            .detail-sections {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }
            
            .detail-section {
                padding: 12px;
            }
            
            .detail-attributes {
                grid-template-columns: 1fr !important;
            }
            
            .detail-attribute {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
                padding: 6px 0;
            }
            
            .detail-attribute-value {
                justify-content: flex-start;
                width: 100%;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± */
            .d3-tree-container {
                min-height: 300px;
                padding: 10px;
                overflow: auto;
            }
            
            .d3-tree-container svg {
                transform: scale(0.7);
                transform-origin: center top;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿ≥ŸÑŸàŸÉ */
            .behavior-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .behavior-display {
                padding: 20px;
                min-height: 150px;
            }
            
            .behavior-cell {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿ≤ÿ± ÿßŸÑŸÑÿ∫ÿ© */
            .language-switcher {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 15px;
                text-align: center;
            }
            
            body.english .language-switcher {
                right: auto;
                left: auto;
            }
            
            .lang-btn {
                margin: 0 auto;
            }
            
            /* ÿ•ÿµŸÑÿßÿ≠ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖÿ™ÿπÿØÿØÿ© ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± */
            select[multiple] {
                height: auto;
                min-height: 100px;
            }
        }

    @media (max-width: 480px) {
        body {
            padding: 8px;
        }
        
        .container {
            padding: 0 8px;
        }
        
        h1 {
            font-size: 1.6rem !important;
        }
        
        h2 {
            font-size: 1.2rem !important;
        }
        
        .card {
            padding: 12px !important;
        }
        
        .compounds-grid, .pathogens-grid {
            padding: 10px;
            gap: 12px;
        }
        
        /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ•ÿ∂ÿßŸÅŸä ŸÑŸÑÿ¥ÿ¨ÿ±ÿ© */
        .d3-tree-container {
            min-height: 250px;
            padding: 5px;
        }
        
        .d3-tree-container svg {
            transform: scale(0.5);
        }
        
        /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© */
        #dangerChart {
            height: 200px;
        }
        
        .rank-item {
            padding: 12px;
            flex-direction: column;
            text-align: center;
            gap: 10px;
        }
        
        .rank-number {
            margin: 0 auto;
        }
        
        /* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÜŸàÿßŸÅÿ∞ ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ© */
        .password-modal-content {
            width: 95%;
            margin: 10px;
            padding: 20px;
        }
        
        .password-modal-buttons {
            flex-direction: column;
        }
    }

    /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑŸàÿ∂ÿπ ÿßŸÑÿ£ŸÅŸÇŸä ÿπŸÑŸâ ÿßŸÑŸáŸàÿßÿ™ŸÅ */
    @media (max-height: 500px) and (orientation: landscape) {
        .header {
            padding: 10px 0;
            margin-bottom: 15px;
        }
        
        .dashboard {
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .card {
            padding: 12px;
        }
        
        .table-header {
            padding: 12px;
        }
    }

    /* ŸÖŸÜÿπ ÿßŸÑÿ™ŸÉÿ®Ÿäÿ± ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÅŸä ÿ≠ŸÇŸàŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ ÿπŸÑŸâ iOS */
    @media (max-width: 768px) {
        input[type="text"],
        input[type="number"],
        input[type="password"],
        select,
        textarea {
            font-size: 16px !important;
            transform: scale(1);
        }
    }

    /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ŸÖÿ™Ÿàÿ≥ÿ∑ÿ© ÿßŸÑÿ≠ÿ¨ŸÖ */
    @media (min-width: 769px) and (max-width: 1024px) {
        .dashboard {
            grid-template-columns: 1fr;
        }
        
        .documentation-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .verification-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .compounds-grid, .pathogens-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

        @media (max-width: 480px) {
            .d3-tree-container {
                min-height: 400px;
            }
            
            .d3-tree-container svg {
                transform: scale(0.6);
            }
            
            .d3-node text {
                font-size: 8px !important;
            }
        }
    </style>
</head>
<body>
    <!-- ÿ≤ÿ± ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© -->
    <div class="language-switcher">
        <button class="lang-btn" id="languageToggle">
            <i class="fas fa-language"></i>
            <span id="langText">English</span>
        </button>
    </div>

    <!-- ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿπÿßÿ¶ŸÖÿ© ŸÅŸä ÿßŸÑÿÆŸÑŸÅŸäÿ© -->
    <div class="floating-elements">
        <div class="floating-element" style="top: 20%; left: 10%;"></div>
        <div class="floating-element" style="top: 60%; left: 80%;"></div>
        <div class="floating-element" style="top: 80%; left: 30%;"></div>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± -->
    <div class="password-modal" id="passwordModal">
        <div class="password-modal-content">
            <h3><i class="fas fa-lock"></i> <span data-ar="ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±" data-en="Password Verification">ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±</span></h3>
            <div class="form-group">
                <label for="passwordInput"><span data-ar="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ŸÑŸÑÿ≠ÿ∞ŸÅ:" data-en="Enter password for deletion:">ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ŸÑŸÑÿ≠ÿ∞ŸÅ:</span></label>
                <input type="password" id="passwordInput" placeholder="" data-ar-placeholder="ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±" data-en-placeholder="Password">
            </div>
            <div class="password-modal-buttons">
                <button class="btn btn-danger" id="confirmDeleteBtn"><span data-ar="ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ≠ÿ∞ŸÅ" data-en="Confirm Delete">ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ≠ÿ∞ŸÅ</span></button>
                <button class="btn" id="cancelDeleteBtn"><span data-ar="ÿ•ŸÑÿ∫ÿßÿ°" data-en="Cancel">ÿ•ŸÑÿ∫ÿßÿ°</span></button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 data-ar="BioPulse Data Hub" data-en="BioPulse Data Hub">BioPulse Data Hub</h1>
            <p class="subtitle" data-ar="ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© - ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ ŸàÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©" data-en="Biological Data Management System - Pathogens and Compounds Management">ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ŸäŸàŸäÿ© - ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ ŸàÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div class="dashboard">
            <!-- ÿ®ÿ∑ÿßŸÇÿ© ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© -->
            <div class="card">
                <h2><i class="fas fa-flask"></i> <span data-ar="ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ¨ÿØŸäÿØ" data-en="Add New Chemical Compound">ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ¨ÿØŸäÿØ</span></h2>
                <form id="compound-form">
                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-file-alt"></i> <span data-ar="ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©" data-en="Basic Information">ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©</span>
                        </div>
                        <div class="form-grid">
                            <div>
                                <label for="c_displayName" data-ar="ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ® (Display Name)" data-en="Compound Name (Display Name)">ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ® (Display Name)</label>
                                <input type="text" id="c_displayName" required>
                            </div>
                            <div>
                                <label for="c_category" data-ar="ÿßŸÑÿ™ÿµŸÜŸäŸÅ (Category)" data-en="Category">ÿßŸÑÿ™ÿµŸÜŸäŸÅ (Category)</label>
                                <select id="c_category" required>
                                    <option value="Antimicrobial" data-ar="ŸÖÿ∂ÿßÿØ ŸÖŸäŸÉÿ±Ÿàÿ®Ÿä (Antimicrobial)" data-en="Antimicrobial">ŸÖÿ∂ÿßÿØ ŸÖŸäŸÉÿ±Ÿàÿ®Ÿä (Antimicrobial)</option>
                                    <option value="Toxin" data-ar="ÿ≥ŸÖ (Toxin)" data-en="Toxin">ÿ≥ŸÖ (Toxin)</option>
                                    <option value="Immunomodulator" data-ar="ŸÖŸÜÿ∏ŸÖ ŸÖŸÜÿßÿπŸä (Immunomodulator)" data-en="Immunomodulator">ŸÖŸÜÿ∏ŸÖ ŸÖŸÜÿßÿπŸä (Immunomodulator)</option>
                                    <option value="Nutrient" data-ar="ŸÖÿ∫ÿ∞Ÿä (Nutrient)" data-en="Nutrient">ŸÖÿ∫ÿ∞Ÿä (Nutrient)</option>
                                    <option value="Neutral" data-ar="ŸÖÿ≠ÿßŸäÿØ (Neutral)" data-en="Neutral">ŸÖÿ≠ÿßŸäÿØ (Neutral)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-atom"></i> <span data-ar="ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± ŸàÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ" data-en="Effect and Balance">ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± ŸàÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ</span>
                        </div>
                        <div class="form-grid">
                            <div>
                                <label for="c_effectType" data-ar="ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± (Effect Type)" data-en="Effect Type">ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± (Effect Type)</label>
                                <select id="c_effectType" required>
                                    <option value="InhibitReproduction" data-ar="ÿ™ÿ´ÿ®Ÿäÿ∑ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±" data-en="Inhibit Reproduction">ÿ™ÿ´ÿ®Ÿäÿ∑ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±</option>
                                    <option value="SlowMovement" data-ar="ÿ•ÿ®ÿ∑ÿßÿ° ÿßŸÑÿ≠ÿ±ŸÉÿ©" data-en="Slow Movement">ÿ•ÿ®ÿ∑ÿßÿ° ÿßŸÑÿ≠ÿ±ŸÉÿ©</option>
                                    <option value="DamageOverTime" data-ar="ÿ∂ÿ±ÿ± ŸÖÿ≥ÿ™ŸÖÿ±" data-en="Damage Over Time">ÿ∂ÿ±ÿ± ŸÖÿ≥ÿ™ŸÖÿ±</option>
                                    <option value="ReduceDefense" data-ar="ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿØŸÅÿßÿπ" data-en="Reduce Defense">ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿØŸÅÿßÿπ</option>
                                    <option value="BoostDefense" data-ar="ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿØŸÅÿßÿπ" data-en="Boost Defense">ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿØŸÅÿßÿπ</option>
                                    <option value="BindAntigen" data-ar="ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ≥ÿ™ÿ∂ÿØ" data-en="Bind Antigen">ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ≥ÿ™ÿ∂ÿØ</option>
                                    <option value="InflammationChange" data-ar="ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿßŸÑÿ™Ÿáÿßÿ®" data-en="Inflammation Change">ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿßŸÑÿ™Ÿáÿßÿ®</option>
                                    <option value="SignalChemotaxis" data-ar="ÿ•ÿ¥ÿßÿ±ÿ© ŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©" data-en="Signal Chemotaxis">ÿ•ÿ¥ÿßÿ±ÿ© ŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©</option>
                                </select>
                            </div>
                            <div>
                                <label for="c_magnitude" data-ar="ÿßŸÑŸÇŸàÿ© (Magnitude)" data-en="Magnitude">ÿßŸÑŸÇŸàÿ© (Magnitude)</label>
                                <input type="number" id="c_magnitude" step="0.1" value="1.0" required>
                            </div>
                            <div>
                                <label for="c_duration" data-ar="ÿßŸÑŸÖÿØÿ© (Duration)" data-en="Duration">ÿßŸÑŸÖÿØÿ© (Duration)</label>
                                <input type="number" id="c_duration" step="0.1" value="5.0" required>
                            </div>
                            <div>
                                <label for="c_productionCost" data-ar="ÿ™ŸÉŸÑŸÅÿ© ÿßŸÑÿ•ŸÜÿ™ÿßÿ¨ (Production Cost)" data-en="Production Cost">ÿ™ŸÉŸÑŸÅÿ© ÿßŸÑÿ•ŸÜÿ™ÿßÿ¨ (Production Cost)</label>
                                <input type="number" id="c_productionCost" step="0.1" value="5.0" required>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="checkbox-group">
                                <input type="checkbox" id="c_stackable">
                                <label for="c_stackable" data-ar="ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ (Stackable)" data-en="Stackable">ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ (Stackable)</label>
                            </div>
                            <div>
                                <label for="c_maxStacks" data-ar="ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ (Max Stacks)" data-en="Max Stacks">ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ (Max Stacks)</label>
                                <input type="number" id="c_maxStacks" value="1" min="1">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-rocket"></i> <span data-ar="ÿ¢ŸÑŸäÿ© ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇ" data-en="Release Mechanism">ÿ¢ŸÑŸäÿ© ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇ</span>
                        </div>
                        <div class="form-grid">
                            <div>
                                <label for="c_carrier" data-ar="ÿßŸÑŸÜÿßŸÇŸÑ (Carrier)" data-en="Carrier">ÿßŸÑŸÜÿßŸÇŸÑ (Carrier)</label>
                                <select id="c_carrier" required>
                                    <option value="ImmuneCell" data-ar="ÿÆŸÑŸäÿ© ŸÖŸÜÿßÿπŸäÿ©" data-en="Immune Cell">ÿÆŸÑŸäÿ© ŸÖŸÜÿßÿπŸäÿ©</option>
                                    <option value="Pathogen" data-ar="ŸÖŸÖÿ±ÿ∂" data-en="Pathogen">ŸÖŸÖÿ±ÿ∂</option>
                                    <option value="Environment" data-ar="ÿ®Ÿäÿ¶ÿ©" data-en="Environment">ÿ®Ÿäÿ¶ÿ©</option>
                                </select>
                            </div>
                            <div>
                                <label for="c_cooldown" data-ar="ŸÅÿ™ÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± (Cooldown)" data-en="Cooldown">ŸÅÿ™ÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± (Cooldown)</label>
                                <input type="number" id="c_cooldown" step="0.1" value="10.0" required>
                            </div>
                        </div>
                    </div>

                    <div class="full-width">
                        <button type="submit" class="btn"><i class="fas fa-plus-circle"></i> <span data-ar="ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ±ŸÉÿ® ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä" data-en="Add Chemical Compound">ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ±ŸÉÿ® ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä</span></button>
                    </div>
                </form>
            </div>

            <!-- ÿ®ÿ∑ÿßŸÇÿ© ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ -->
            <div class="card">
                <h2><i class="fas fa-virus"></i> <span data-ar="ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÖÿ±ÿ∂ ÿ¨ÿØŸäÿØ" data-en="Add New Pathogen">ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÖÿ±ÿ∂ ÿ¨ÿØŸäÿØ</span></h2>
                <form id="pathogen-form">
                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-shield-alt"></i> <span data-ar="ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™" data-en="Basic Information and Statistics">ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™</span>
                        </div>
                        <div class="form-grid">
                            <div>
                                <label for="p_displayName" data-ar="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÖÿ±ÿ∂ (Display Name)" data-en="Pathogen Name (Display Name)">ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÖÿ±ÿ∂ (Display Name)</label>
                                <input type="text" id="p_displayName" required>
                            </div>
                            <div>
                                <label for="p_category" data-ar="ÿßŸÑÿ™ÿµŸÜŸäŸÅ (Category)" data-en="Category">ÿßŸÑÿ™ÿµŸÜŸäŸÅ (Category)</label>
                                <select id="p_category" required>
                                    <option value="Bacteria" data-ar="ÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß" data-en="Bacteria">ÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß</option>
                                    <option value="Virus" data-ar="ŸÅŸäÿ±Ÿàÿ≥" data-en="Virus">ŸÅŸäÿ±Ÿàÿ≥</option>
                                    <option value="Fungus" data-ar="ŸÅÿ∑ÿ±Ÿäÿßÿ™" data-en="Fungus">ŸÅÿ∑ÿ±Ÿäÿßÿ™</option>
                                    <option value="Parasite" data-ar="ÿ∑ŸÅŸäŸÑŸä" data-en="Parasite">ÿ∑ŸÅŸäŸÑŸä</option>
                                </select>
                            </div>
                            <div>
                                <label for="p_health" data-ar="ÿßŸÑÿµÿ≠ÿ© (Health)" data-en="Health">ÿßŸÑÿµÿ≠ÿ© (Health)</label>
                                <input type="number" id="p_health" step="0.1" value="10.0" required>
                            </div>
                            <div>
                                <label for="p_moveSpeed" data-ar="ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ© (Move Speed)" data-en="Move Speed">ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ© (Move Speed)</label>
                                <input type="number" id="p_moveSpeed" step="0.1" value="1.0" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-dna"></i> <span data-ar="ÿßŸÑÿ™ŸÉÿßÿ´ÿ±" data-en="Reproduction">ÿßŸÑÿ™ŸÉÿßÿ´ÿ±</span>
                        </div>
                        <div class="form-grid">
                            <div>
                                <label for="p_reproPeriod" data-ar="ŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ± (Reproduction Period)" data-en="Reproduction Period">ŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ± (Reproduction Period)</label>
                                <input type="number" id="p_reproPeriod" step="0.1" value="10.0" required>
                            </div>
                            <div>
                                <label for="p_reproAmount" data-ar="ŸÉŸÖŸäÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ± (Reproduction Amount)" data-en="Reproduction Amount">ŸÉŸÖŸäÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ± (Reproduction Amount)</label>
                                <input type="number" id="p_reproAmount" value="2" required>
                            </div>
                            <div>
                                <label for="p_minHealth" data-ar="ÿ£ÿØŸÜŸâ ÿµÿ≠ÿ© ŸÑŸÑÿ™ŸÉÿßÿ´ÿ± (Min Health)" data-en="Min Health for Reproduction">ÿ£ÿØŸÜŸâ ÿµÿ≠ÿ© ŸÑŸÑÿ™ŸÉÿßÿ´ÿ± (Min Health)</label>
                                <input type="number" id="p_minHealth" step="0.01" value="0.8" required>
                            </div>
                            <div>
                                <label for="p_reqOxygen" data-ar="ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (Required Oxygen)" data-en="Required Oxygen">ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (Required Oxygen)</label>
                                <input type="number" id="p_reqOxygen" value="5" required>
                            </div>
                            <div>
                                <label for="p_reqGlucose" data-ar="ÿßŸÑÿ¨ŸÑŸàŸÉŸàÿ≤ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (Required Glucose)" data-en="Required Glucose">ÿßŸÑÿ¨ŸÑŸàŸÉŸàÿ≤ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (Required Glucose)</label>
                                <input type="number" id="p_reqGlucose" value="3" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-user-secret"></i> <span data-ar="ÿßŸÑÿ™ÿÆŸÅŸä ŸàÿßŸÑŸÇÿ™ÿßŸÑ" data-en="Stealth and Combat">ÿßŸÑÿ™ÿÆŸÅŸä ŸàÿßŸÑŸÇÿ™ÿßŸÑ</span>
                        </div>
                        <div class="form-grid">
                            <div class="checkbox-group">
                                <input type="checkbox" id="p_canHide">
                                <label for="p_canHide" data-ar="ŸäŸÖŸÉŸÜŸá ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Can Hide)" data-en="Can Hide">ŸäŸÖŸÉŸÜŸá ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Can Hide)</label>
                            </div>
                            <div>
                                <label for="p_behavior" data-ar="ÿßŸÑÿ≥ŸÑŸàŸÉ (Behavior)" data-en="Behavior">ÿßŸÑÿ≥ŸÑŸàŸÉ (Behavior)</label>
                                <select id="p_behavior" required>
                                    <option value="ÿπÿØŸàÿßŸÜŸä" data-ar="ÿπÿØŸàÿßŸÜŸä" data-en="Aggressive">ÿπÿØŸàÿßŸÜŸä</option>
                                    <option value="ŸÖÿ™ÿπÿßŸàŸÜ" data-ar="ŸÖÿ™ÿπÿßŸàŸÜ" data-en="Cooperative">ŸÖÿ™ÿπÿßŸàŸÜ</option>
                                    <option value="ÿØŸÅÿßÿπŸä" data-ar="ÿØŸÅÿßÿπŸä" data-en="Defensive">ÿØŸÅÿßÿπŸä</option>
                                </select>
                            </div>
                            <div>
                                <label for="p_hideEfficiency" data-ar="ŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Hide Efficiency)" data-en="Hide Efficiency">ŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Hide Efficiency)</label>
                                <input type="number" id="p_hideEfficiency" step="0.1" value="1.0">
                            </div>
                            <div>
                                <label for="p_autoHideFrequency" data-ar="ÿ™Ÿàÿßÿ™ÿ± ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Auto Hide Frequency)" data-en="Auto Hide Frequency">ÿ™Ÿàÿßÿ™ÿ± ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Auto Hide Frequency)</label>
                                <input type="number" id="p_autoHideFrequency" step="0.1" value="2.0">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-header">
                            <i class="fas fa-vial"></i> <span data-ar="ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©" data-en="Chemical Compounds System">ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©</span>
                        </div>
                        <div class="full-width">
                            <label for="p_compoundsProduced" data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© (Compounds Produced)" data-en="Compounds Produced">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© (Compounds Produced)</label>
                            <select id="p_compoundsProduced" multiple size="4">
                                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
                            </select>
                            <small style="color: var(--accent-primary); display: block; margin-top: 5px;" data-ar="(ÿßÿ≥ÿ™ÿÆÿØŸÖ Ctrl/Cmd ŸÑŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖÿ™ÿπÿØÿØ - ÿ≥Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÜÿßŸÇŸÑŸáÿß &quot;ŸÖŸÖÿ±ÿ∂&quot; ŸÅŸÇÿ∑)" data-en="(Use Ctrl/Cmd for multiple selection - Only compounds with &quot;Pathogen&quot; carrier will be shown)">
                                (ÿßÿ≥ÿ™ÿÆÿØŸÖ Ctrl/Cmd ŸÑŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖÿ™ÿπÿØÿØ - ÿ≥Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÜÿßŸÇŸÑŸáÿß "ŸÖŸÖÿ±ÿ∂" ŸÅŸÇÿ∑)
                            </small>
                        </div>
                        <div class="full-width">
                            <label for="p_immuneToCompounds" data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß (Immune To Compounds)" data-en="Immune To Compounds">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß (Immune To Compounds)</label>
                            <select id="p_immuneToCompounds" multiple size="4">
                                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
                            </select>
                            <small style="color: var(--accent-primary); display: block; margin-top: 5px;" data-ar="(ÿßÿ≥ÿ™ÿÆÿØŸÖ Ctrl/Cmd ŸÑŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖÿ™ÿπÿØÿØ - ŸÑŸÜ Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ£ÿ¨ÿ≥ÿßŸÖ ÿßŸÑŸÖÿ∂ÿßÿØÿ©)" data-en="(Use Ctrl/Cmd for multiple selection - Antibodies will not be shown)">
                                (ÿßÿ≥ÿ™ÿÆÿØŸÖ Ctrl/Cmd ŸÑŸÑÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖÿ™ÿπÿØÿØ - ŸÑŸÜ Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ£ÿ¨ÿ≥ÿßŸÖ ÿßŸÑŸÖÿ∂ÿßÿØÿ©)
                            </small>
                        </div>
                    </div>

                    <div class="full-width">
                        <button type="submit" class="btn"><i class="fas fa-plus-circle"></i> <span data-ar="ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂" data-en="Add Pathogen">ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂</span></button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ŸÇÿ≥ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
        <div class="data-display">
            <!-- ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© -->
            <div class="table-container">
                <div class="table-header">
                    <h2><i class="fas fa-list"></i> <span data-ar="ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©" data-en="Chemical Compounds List">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©</span></h2>
                    <div>
                        <button id="download-compounds-btn" class="btn btn-download"><i class="fas fa-download"></i> <span data-ar="ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ (JSON)" data-en="Download Compounds Data (JSON)">ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ (JSON)</span></button>
                        <button id="clear-compounds-btn" class="btn btn-danger"><i class="fas fa-trash"></i> <span data-ar="ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™" data-en="Clear All Compounds">ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™</span></button>
                    </div>
                </div>
                <div class="compounds-grid" id="compounds-grid">
                    <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
                </div>
            </div>

                    <div class="table-container" id="auto-verification-section">
            <div class="table-header">
                <h2><i class="fas fa-check-double"></i> <span data-ar="ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÖŸÜ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©" data-en="Automatic Chemical Compounds Verification">ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÖŸÜ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©</span></h2>
            </div>
            <div class="auto-verification-section">
                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> <span data-ar="ÿ™ŸÜÿ®ŸäŸá ŸáÿßŸÖ" data-en="Important Notice">ÿ™ŸÜÿ®ŸäŸá ŸáÿßŸÖ</span></h4>
                    <p data-ar="Ÿáÿ∞ÿß ÿßŸÑŸÜÿ∏ÿßŸÖ ŸäŸÅÿ≠ÿµ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàŸäÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØŸáÿß ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©. ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä PubChem ŸÇÿØ ÿ™ŸÉŸàŸÜ ÿ∫Ÿäÿ± ÿπŸÑŸÖŸäÿ© ÿ£Ÿà ŸÖÿÆÿ™ÿ±ÿπÿ© ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑŸÑÿπÿ®ÿ© ŸÅŸÇÿ∑." data-en="This system automatically checks all chemical compounds in the database and verifies their existence in the trusted PubChem scientific database. Compounds not found in PubChem may be non-scientific or invented for game purposes only.">
                        Ÿáÿ∞ÿß ÿßŸÑŸÜÿ∏ÿßŸÖ ŸäŸÅÿ≠ÿµ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàŸäÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØŸáÿß ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©. ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä PubChem ŸÇÿØ ÿ™ŸÉŸàŸÜ ÿ∫Ÿäÿ± ÿπŸÑŸÖŸäÿ© ÿ£Ÿà ŸÖÿÆÿ™ÿ±ÿπÿ© ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑŸÑÿπÿ®ÿ© ŸÅŸÇÿ∑.
                    </p>
                </div>
                
                <div class="verification-header">
                    <div>
                        <h3><i class="fas fa-cogs"></i> <span data-ar="ŸÅÿ≠ÿµ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑŸÖÿ±ŸÉÿ®ÿßÿ™" data-en="Automatic Compounds Check">ŸÅÿ≠ÿµ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÑŸÑŸÖÿ±ŸÉÿ®ÿßÿ™</span></h3>
                        <p data-ar="ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ≤ÿ± ŸÑŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ" data-en="Click the button to check all compounds in the system">ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ≤ÿ± ŸÑŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ</p>
                    </div>
                    <button class="btn" id="verify-all-compounds-btn">
                        <i class="fas fa-search"></i> 
                        <span data-ar="ŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™" data-en="Check All Compounds">ŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™</span>
                    </button>
                </div>
                
                <div class="verification-status">
                    <div class="status-item status-verified">
                        <i class="fas fa-check-circle"></i>
                        <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©:" data-en="Verified Compounds:">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©:</span>
                        <span id="verified-count">0</span>
                    </div>
                    <div class="status-item status-unverified">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©:" data-en="Unverified Compounds:">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©:</span>
                        <span id="unverified-count">0</span>
                    </div>
                    <div class="status-item status-checking" id="checking-status" style="display: none;">
                        <i class="fas fa-sync fa-spin"></i>
                        <span data-ar="ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÅÿ≠ÿµ..." data-en="Checking...">ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÅÿ≠ÿµ...</span>
                    </div>
                </div>
                
                <!-- ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© -->
                <div class="verified-compounds">
                    <h3><i class="fas fa-check-circle"></i> <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©" data-en="Verified Scientific Compounds">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©</span></h3>
                    <p data-ar="Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ÿßŸÑÿπŸÑŸÖŸäÿ© ŸàŸáŸä ŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ© ŸàŸÖÿπÿ™ÿ±ŸÅ ÿ®Ÿáÿß ÿπŸÑŸÖŸäÿßŸã." data-en="These compounds exist in the PubChem scientific database and are real, scientifically recognized compounds.">
                        Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ÿßŸÑÿπŸÑŸÖŸäÿ© ŸàŸáŸä ŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ© ŸàŸÖÿπÿ™ÿ±ŸÅ ÿ®Ÿáÿß ÿπŸÑŸÖŸäÿßŸã.
                    </p>
                    <div class="verification-grid" id="verified-compounds-grid">
                        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß ÿ®ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© -->
                    </div>
                </div>
                <!-- ŸÇÿ≥ŸÖ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä -->
                <div class="table-container" id="auto-documentation-section">
                    <div class="table-header">
                        <h2><i class="fas fa-certificate"></i> <span data-ar="ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä" data-en="Auto Documentation Cards">ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä</span></h2>
                        <button class="btn" id="refresh-documentation-btn">
                            <i class="fas fa-sync-alt"></i> 
                            <span data-ar="ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™" data-en="Refresh Cards">ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™</span>
                        </button>
                    </div>
                    <div class="auto-verification-section">
                        <div class="warning-box">
                            <h4><i class="fas fa-info-circle"></i> <span data-ar="ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸáÿßŸÖÿ©" data-en="Important Information">ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸáÿßŸÖÿ©</span></h4>
                            <p data-ar="Ÿáÿ∞ÿß ÿßŸÑŸÜÿ∏ÿßŸÖ Ÿäÿ¨ŸÑÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© ŸÖŸÜ PubChem ŸàŸäÿπÿ±ÿ∂ ÿ±ŸÖÿ≤Ÿáÿß ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä ŸàŸàÿµŸÅŸáÿß ÿßŸÑÿπŸÑŸÖŸä. ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØŸáÿß ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©." data-en="This system automatically fetches information for verified compounds from PubChem and displays their chemical symbols and scientific descriptions. The following cards show compounds that have been verified in the scientific database.">
                                Ÿáÿ∞ÿß ÿßŸÑŸÜÿ∏ÿßŸÖ Ÿäÿ¨ŸÑÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© ŸÖŸÜ PubChem ŸàŸäÿπÿ±ÿ∂ ÿ±ŸÖÿ≤Ÿáÿß ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä ŸàŸàÿµŸÅŸáÿß ÿßŸÑÿπŸÑŸÖŸä. ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØŸáÿß ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©.
                            </p>
                        </div>
                        
                        <div class="documentation-grid" id="documentation-grid">
                            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© -->
                        </div>
                    </div>
                </div>
                <!-- ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© -->
                <div class="unverified-compounds">
                    <h3><i class="fas fa-exclamation-triangle"></i> <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©" data-en="Unverified Compounds">ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©</span></h3>
                    <p data-ar="Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ŸàŸÇÿØ ÿ™ŸÉŸàŸÜ ŸÖÿÆÿ™ÿ±ÿπÿ© ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑŸÑÿπÿ®ÿ© ŸÅŸÇÿ∑." data-en="These compounds are not found in the PubChem database and may be invented for game purposes only.">
                        Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ PubChem ŸàŸÇÿØ ÿ™ŸÉŸàŸÜ ŸÖÿÆÿ™ÿ±ÿπÿ© ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑŸÑÿπÿ®ÿ© ŸÅŸÇÿ∑.
                    </p>
                    <div class="verification-grid" id="unverified-compounds-grid">
                        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß ÿ®ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© -->
                    </div>
                </div>
            </div>
        </div>


            <!-- ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ -->
            <div class="table-container">
                <div class="table-header">
                    <h2><i class="fas fa-biohazard"></i> <span data-ar="ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™" data-en="Pathogens List">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™</span></h2>
                    <div>
                        <button id="download-pathogens-btn" class="btn btn-download"><i class="fas fa-download"></i> <span data-ar="ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ (JSON)" data-en="Download Pathogens Data (JSON)">ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ (JSON)</span></button>
                        <button id="clear-pathogens-btn" class="btn btn-danger"><i class="fas fa-trash"></i> <span data-ar="ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™" data-en="Clear All Pathogens">ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™</span></button>
                    </div>
                </div>
                <div class="pathogens-grid" id="pathogens-grid">
                    <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
                </div>
            </div>

            <!-- ÿ¥ÿ¨ÿ±ÿ© ÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ D3.js -->
            <div class="table-container" id="evolution-tree-container" style="display: none;">
                <div class="table-header">
                    <h2><i class="fas fa-sitemap"></i> <span data-ar="ÿ¥ÿ¨ÿ±ÿ© ÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™" data-en="Pathogen Evolution Tree">ÿ¥ÿ¨ÿ±ÿ© ÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™</span></h2>
                    <div>
                        <button class="btn" id="close-tree-btn"><i class="fas fa-times"></i> <span data-ar="ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¥ÿ¨ÿ±ÿ©" data-en="Close Tree">ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¥ÿ¨ÿ±ÿ©</span></button>
                    </div>
                </div>
                <div class="d3-tree-container" id="evolution-tree">
                    <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ D3.js -->
                </div>
            </div>

            <!-- ŸÇÿ≥ŸÖ ŸÖÿ≠ÿßŸÉÿßÿ© ÿ≥ŸÑŸàŸÉ ÿßŸÑÿÆŸÑÿßŸäÿß -->
            <!-- <div class="table-container" id="behavior-section">
                <div class="table-header">
                    <h2><i class="fas fa-random"></i> <span data-ar="ŸÖÿ≠ÿßŸÉÿßÿ© ÿ≥ŸÑŸàŸÉ ÿßŸÑÿÆŸÑÿßŸäÿß ÿßŸÑÿπÿ¥Ÿàÿßÿ¶Ÿä" data-en="Random Cell Behavior Simulation">ŸÖÿ≠ÿßŸÉÿßÿ© ÿ≥ŸÑŸàŸÉ ÿßŸÑÿÆŸÑÿßŸäÿß ÿßŸÑÿπÿ¥Ÿàÿßÿ¶Ÿä</span></h2>
                </div>
                <div class="card">
                    <div class="behavior-controls">
                        <button class="btn" id="startBehaviorBtn"><i class="fas fa-play"></i> <span data-ar="ÿ®ÿØÿ° ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©" data-en="Start Simulation">ÿ®ÿØÿ° ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©</span></button>
                        <button class="btn" id="stopBehaviorBtn"><i class="fas fa-stop"></i> <span data-ar="ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©" data-en="Stop Simulation">ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©</span></button>
                        <button class="btn" id="resetBehaviorBtn"><i class="fas fa-redo"></i> <span data-ar="ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ" data-en="Reset">ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ</span></button>
                    </div>
                    <div class="behavior-display">
                        <div class="behavior-cell" id="behaviorCell">
                            <i class="fas fa-biohazard"></i>
                        </div>
                        <div class="behavior-status" id="behaviorStatus">
                            <span data-ar="ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿ®ÿØÿ° ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©" data-en="Click Start Simulation">ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿ®ÿØÿ° ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©</span>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- ŸÇÿ≥ŸÖ ŸÖŸÇÿßÿ±ŸÜÿ© ÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ -->
            <div class="table-container" id="danger-section">
                <div class="table-header">
                    <h2><i class="fas fa-chart-bar"></i> <span data-ar="ŸÖŸÇÿßÿ±ŸÜÿ© ÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™" data-en="Pathogen Danger Comparison">ŸÖŸÇÿßÿ±ŸÜÿ© ÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™</span></h2>
                    <button class="btn" id="updateDangerChartBtn"><i class="fas fa-sync-alt"></i> <span data-ar="ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÇÿßÿ±ŸÜÿ©" data-en="Update Comparison">ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÇÿßÿ±ŸÜÿ©</span></button>
                </div>
                <div class="card">
                    <div id="dangerChart" style="height: 300px; margin-bottom: 20px;"></div>
                    <div id="dangerRanking"></div>
                </div>
            </div>

            <!-- ŸÇÿ≥ŸÖ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸÖÿ±ÿ∂ -->
            <div class="pathogen-detail" id="pathogen-detail" style="display: none;">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
            </div>

            <!-- ŸÇÿ≥ŸÖ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ±ŸÉÿ® -->
            <div class="compound-detail" id="compound-detail" style="display: none;">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿá ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
            </div>
        </div>
    </div>

    <script>
        // ÿ™ŸÉŸàŸäŸÜ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDBWzFQjYctTEJdal6hK5w3S-qAxWZEoD4",
            authDomain: "biopulse-data-hub.firebaseapp.com",
            databaseURL: "https://biopulse-data-hub-default-rtdb.firebaseio.com",
            projectId: "biopulse-data-hub",
            storageBucket: "biopulse-data-hub.firebasestorage.app",
            messagingSenderId: "576434281833",
            appId: "1:576434281833:web:7fae53ea904472fbe4f1f8",
            measurementId: "G-9CC3E5DM7Z"
        };

        // ÿ™ŸáŸäÿ¶ÿ© Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ŸÑŸÑÿ≠ÿ∞ŸÅ
        const DELETE_PASSWORD = "hisham89500ham00bio";

        // ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© ÿßŸÑÿπŸÑŸÖŸäÿ©
        const chemicalCompoundsDB = {
            "ŸáŸäÿØÿ±ŸàŸÉÿ≥ŸäÿØ ÿßŸÑÿµŸàÿØŸäŸàŸÖ": {
                formula: "NaOH",
                description: {
                    ar: "ŸáŸäÿØÿ±ŸàŸÉÿ≥ŸäÿØ ÿßŸÑÿµŸàÿØŸäŸàŸÖ ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ŸÇÿßÿπÿØŸä ŸÇŸàŸäÿå ŸäŸèÿπÿ±ŸÅ ÿ£Ÿäÿ∂Ÿãÿß ÿ®ÿßÿ≥ŸÖ ÿßŸÑÿµŸàÿØÿß ÿßŸÑŸÉÿßŸàŸäÿ©. Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿßŸÑÿπÿØŸäÿØ ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿµŸÜÿßÿπŸäÿ© ŸàÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©.",
                    en: "Sodium hydroxide is a strong alkaline chemical compound, also known as caustic soda. It is used in various industrial and chemical applications."
                },
                commonNames: ["ÿßŸÑÿµŸàÿØÿß ÿßŸÑŸÉÿßŸàŸäÿ©", "Sodium Hydroxide", "Caustic Soda", "Lye"],
                molecularWeight: 40.00,
                pubchemCID: "14798"
            },
            "ŸÉŸÑŸàÿ±ŸäÿØ ÿßŸÑÿµŸàÿØŸäŸàŸÖ": {
                formula: "NaCl",
                description: {
                    ar: "ŸÉŸÑŸàÿ±ŸäÿØ ÿßŸÑÿµŸàÿØŸäŸàŸÖ ŸáŸà ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ£ŸäŸàŸÜŸäÿå ŸÖÿπÿ±ŸàŸÅ ÿ®ÿßÿ≥ŸÖ ŸÖŸÑÿ≠ ÿßŸÑÿ∑ÿπÿßŸÖ. Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿßŸÑÿ∑ÿπÿßŸÖ ŸàÿßŸÑÿ∑ÿ® ŸàÿßŸÑÿµŸÜÿßÿπÿ©.",
                    en: "Sodium chloride is an ionic chemical compound, known as table salt. It is used in food, medicine, and industry."
                },
                commonNames: ["ŸÖŸÑÿ≠ ÿßŸÑÿ∑ÿπÿßŸÖ", "Sodium Chloride", "Table Salt"],
                molecularWeight: 58.44,
                pubchemCID: "5234"
            },
            "ÿßŸÑÿ•Ÿäÿ´ÿßŸÜŸàŸÑ": {
                formula: "C‚ÇÇH‚ÇÖOH",
                description: {
                    ar: "ÿßŸÑÿ•Ÿäÿ´ÿßŸÜŸàŸÑ ŸáŸà ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿπÿ∂ŸàŸä ŸÖŸÜ ŸÅÿµŸäŸÑÿ© ÿßŸÑŸÉÿ≠ŸàŸÑŸäÿßÿ™ÿå Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÉŸÖÿ∑Ÿáÿ± ŸàŸàŸÇŸàÿØ ŸàŸÖÿ∞Ÿäÿ®.",
                    en: "Ethanol is an organic chemical compound of the alcohol family, used as a disinfectant, fuel, and solvent."
                },
                commonNames: ["ŸÉÿ≠ŸàŸÑ ÿ•Ÿäÿ´ŸäŸÑŸä", "Ethanol", "Ethyl Alcohol"],
                molecularWeight: 46.07,
                pubchemCID: "702"
            },
            "ÿ≠ŸÖÿ∂ ÿßŸÑŸáŸäÿØÿ±ŸàŸÉŸÑŸàÿ±ŸäŸÉ": {
                formula: "HCl",
                description: {
                    ar: "ÿ≠ŸÖÿ∂ ÿßŸÑŸáŸäÿØÿ±ŸàŸÉŸÑŸàÿ±ŸäŸÉ ŸáŸà ÿ≠ŸÖÿ∂ ŸÇŸàŸä Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿßŸÑÿµŸÜÿßÿπÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© ŸàÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÖÿπÿØŸÜŸäÿ©.",
                    en: "Hydrochloric acid is a strong acid used in chemical industries and mineral processing."
                },
                commonNames: ["ÿ≠ŸÖÿ∂ ÿßŸÑŸÉŸÑŸàÿ±ŸäÿØÿ±ŸäŸÉ", "Hydrochloric Acid", "Muriatric Acid"],
                molecularWeight: 36.46,
                pubchemCID: "313"
            },
            "ÿßŸÑŸÖŸäÿ´ÿßŸÜ": {
                formula: "CH‚ÇÑ",
                description: {
                    ar: "ÿßŸÑŸÖŸäÿ´ÿßŸÜ ŸáŸà ÿ£ÿ®ÿ≥ÿ∑ ŸÖÿ±ŸÉÿ® ŸáŸäÿØÿ±ŸàŸÉÿ±ÿ®ŸàŸÜŸäÿå ŸàŸáŸà ÿßŸÑŸÖŸÉŸàŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÑŸÑÿ∫ÿßÿ≤ ÿßŸÑÿ∑ÿ®ŸäÿπŸä.",
                    en: "Methane is the simplest hydrocarbon compound, and the main component of natural gas."
                },
                commonNames: ["ÿ∫ÿßÿ≤ ÿßŸÑŸÖÿ≥ÿ™ŸÜŸÇÿπÿßÿ™", "Methane", "Marsh Gas"],
                molecularWeight: 16.04,
                pubchemCID: "297"
            },
            "ÿßŸÑÿ¨ŸÑŸàŸÉŸàÿ≤": {
                formula: "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ",
                description: {
                    ar: "ÿßŸÑÿ¨ŸÑŸàŸÉŸàÿ≤ ŸáŸà ÿ≥ŸÉÿ± ÿ®ÿ≥Ÿäÿ∑ Ÿàÿ£ÿ≠ÿØ ÿ£ŸáŸÖ ŸÖÿµÿßÿØÿ± ÿßŸÑÿ∑ÿßŸÇÿ© ŸÅŸä ÿßŸÑŸÉÿßÿ¶ŸÜÿßÿ™ ÿßŸÑÿ≠Ÿäÿ©.",
                    en: "Glucose is a simple sugar and one of the most important sources of energy in living organisms."
                },
                commonNames: ["ÿ≥ŸÉÿ± ÿßŸÑÿπŸÜÿ®", "Glucose", "Dextrose"],
                molecularWeight: 180.16,
                pubchemCID: "5793"
            },
            "ÿßŸÑÿ£ŸàŸÉÿ≥ÿ¨ŸäŸÜ": {
                formula: "O‚ÇÇ",
                description: {
                    ar: "ÿßŸÑÿ£ŸàŸÉÿ≥ÿ¨ŸäŸÜ ŸáŸà ÿπŸÜÿµÿ± ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ∫ÿßÿ≤Ÿä ÿ∂ÿ±Ÿàÿ±Ÿä ŸÑŸÑÿ™ŸÜŸÅÿ≥ ŸÅŸä ŸÖÿπÿ∏ŸÖ ÿßŸÑŸÉÿßÿ¶ŸÜÿßÿ™ ÿßŸÑÿ≠Ÿäÿ©.",
                    en: "Oxygen is a gaseous chemical element essential for respiration in most living organisms."
                },
                commonNames: ["ÿ∫ÿßÿ≤ ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ", "Oxygen", "Molecular Oxygen"],
                molecularWeight: 32.00,
                pubchemCID: "977"
            },
            "ÿ´ÿßŸÜŸä ÿ£ŸÉÿ≥ŸäÿØ ÿßŸÑŸÉÿ±ÿ®ŸàŸÜ": {
                formula: "CO‚ÇÇ",
                description: {
                    ar: "ÿ´ÿßŸÜŸä ÿ£ŸÉÿ≥ŸäÿØ ÿßŸÑŸÉÿ±ÿ®ŸàŸÜ ŸáŸà ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ∫ÿßÿ≤Ÿä ŸäŸÜÿ™ÿ¨ ÿπŸÜ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ™ŸÜŸÅÿ≥ ŸàÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÇ.",
                    en: "Carbon dioxide is a gaseous chemical compound produced by respiration and combustion."
                },
                commonNames: ["ÿ∫ÿßÿ≤ ÿßŸÑŸÅÿ≠ŸÖ", "Carbon Dioxide"],
                molecularWeight: 44.01,
                pubchemCID: "280"
            },
            "ÿßŸÑÿ£ŸÖŸàŸÜŸäÿß": {
                formula: "NH‚ÇÉ",
                description: {
                    ar: "ÿßŸÑÿ£ŸÖŸàŸÜŸäÿß ŸáŸä ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ∫ÿßÿ≤Ÿä Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿßŸÑÿπÿØŸäÿØ ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿµŸÜÿßÿπŸäÿ© ŸàÿßŸÑÿ≤ÿ±ÿßÿπŸäÿ©.",
                    en: "Ammonia is a gaseous chemical compound used in many industrial and agricultural applications."
                },
                commonNames: ["ÿ∫ÿßÿ≤ ÿßŸÑŸÜÿ¥ÿßÿØÿ±", "Ammonia"],
                molecularWeight: 17.03,
                pubchemCID: "222"
            }
        };

        // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        document.addEventListener('DOMContentLoaded', function() {
            // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            let compoundsData = [];
            let pathogensData = [];
            let selectedPathogenId = null;
            let selectedCompoundId = null;
            let pendingDeleteAction = null;
            let currentLanguage = 'ar'; // ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©

            // ÿßŸÑÿπŸÜÿßÿµÿ±
            const compoundForm = document.getElementById('compound-form');
            const pathogenForm = document.getElementById('pathogen-form');
            const compoundsGrid = document.getElementById('compounds-grid');
            const pathogensGrid = document.getElementById('pathogens-grid');
            const pathogenCompoundSelect = document.getElementById('p_compoundsProduced');
            const pathogenImmuneToSelect = document.getElementById('p_immuneToCompounds');
            const pathogenBehaviorSelect = document.getElementById('p_behavior');
            const downloadCompoundsBtn = document.getElementById('download-compounds-btn');
            const downloadPathogensBtn = document.getElementById('download-pathogens-btn');
            const clearCompoundsBtn = document.getElementById('clear-compounds-btn');
            const clearPathogensBtn = document.getElementById('clear-pathogens-btn');
            const evolutionTree = document.getElementById('evolution-tree');
            const evolutionTreeContainer = document.getElementById('evolution-tree-container');
            const pathogenDetail = document.getElementById('pathogen-detail');
            const compoundDetail = document.getElementById('compound-detail');
            const closeTreeBtn = document.getElementById('close-tree-btn');
            const passwordModal = document.getElementById('passwordModal');
            const passwordInput = document.getElementById('passwordInput');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
            const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
            const languageToggle = document.getElementById('languageToggle');
            const langText = document.getElementById('langText');
            const startBehaviorBtn = document.getElementById('startBehaviorBtn');
            const stopBehaviorBtn = document.getElementById('stopBehaviorBtn');
            const resetBehaviorBtn = document.getElementById('resetBehaviorBtn');
            const behaviorCell = document.getElementById('behaviorCell');
            const behaviorStatus = document.getElementById('behaviorStatus');
            const updateDangerChartBtn = document.getElementById('updateDangerChartBtn');
            const dangerChart = document.getElementById('dangerChart');
            const dangerRanking = document.getElementById('dangerRanking');
            const verifyAllCompoundsBtn = document.getElementById('verify-all-compounds-btn');
            const verifiedCompoundsGrid = document.getElementById('verified-compounds-grid');
            const unverifiedCompoundsGrid = document.getElementById('unverified-compounds-grid');
            const verifiedCount = document.getElementById('verified-count');
            const unverifiedCount = document.getElementById('unverified-count');
            const checkingStatus = document.getElementById('checking-status');
            const documentationGrid = document.getElementById('documentation-grid');
            const refreshDocumentationBtn = document.getElementById('refresh-documentation-btn');

            let verifiedCompounds = [];
            let unverifiedCompounds = [];
            let isVerifying = false;

            // Ÿàÿ∏ÿßÿ¶ŸÅ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÑÿ∫ÿ©
            function toggleLanguage() {
                currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
                updateLanguage();
            }

            function updateLanguage() {
                // ÿ™ÿ∫ŸäŸäÿ± ÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿµŸÅÿ≠ÿ©
                document.body.classList.toggle('english', currentLanguage === 'en');
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿµŸàÿµ
                document.querySelectorAll('[data-ar], [data-en]').forEach(element => {
                    const text = element.getAttribute(`data-${currentLanguage}`) || element.textContent;
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        if (element.value === element.getAttribute('data-ar') || element.value === element.getAttribute('data-en')) {
                            element.value = text;
                        }
                    } else {
                        element.textContent = text;
                    }
                });
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿµŸàÿµ ŸÅŸä ÿπŸÜÿßÿµÿ± ÿßŸÑÿ•ÿØÿÆÿßŸÑ
                document.querySelectorAll('[data-ar-placeholder], [data-en-placeholder]').forEach(input => {
                    const placeholder = input.getAttribute(`data-${currentLanguage}-placeholder`);
                    if (placeholder) input.placeholder = placeholder;
                });
                
                // ÿ™ÿ≠ÿØŸäÿ´ ŸÜÿµ ÿ≤ÿ± ÿßŸÑŸÑÿ∫ÿ©
                langText.textContent = currentLanguage === 'ar' ? 'English' : 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©';
                
                // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                renderCompoundsGrid();
                renderPathogensGrid();
                updateDocumentationCards();
                updateCounters();
                displayNoCompoundsMessage();
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸÖÿ±ÿ∂ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿπÿ±Ÿàÿ∂ÿßŸã
                if (pathogenDetail.style.display !== 'none' && selectedPathogenId) {
                    const pathogen = pathogensData.find(p => p.id === selectedPathogenId);
                    if (pathogen) {
                        showPathogenDetail(pathogen);
                    }
                }
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿπÿ±Ÿàÿ∂ÿßŸã
                if (compoundDetail.style.display !== 'none' && selectedCompoundId) {
                    const compound = compoundsData.find(c => c.id === selectedCompoundId);
                    if (compound) {
                        showCompoundDetail(compound);
                    }
                }
                
                // ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸÇÿßÿ±ŸÜÿ© ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©
                updateDangerComparison();
                
                // ÿ•ÿπÿßÿØÿ© ÿ±ÿ≥ŸÖ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖÿπÿ±Ÿàÿ∂ÿ©
                if (evolutionTreeContainer.style.display !== 'none' && selectedPathogenId) {
                    renderEvolutionTree(selectedPathogenId);
                }
            }

            // Ÿàÿ∏ÿßÿ¶ŸÅ Firebase
            function saveCompoundToFirebase(compound) {
                const newCompoundKey = database.ref().child('compounds').push().key;
                compound.id = newCompoundKey;
                const updates = {};
                updates['/compounds/' + newCompoundKey] = compound;
                return database.ref().update(updates);
            }

            function savePathogenToFirebase(pathogen) {
                const newPathogenKey = database.ref().child('pathogens').push().key;
                pathogen.id = newPathogenKey;
                const updates = {};
                updates['/pathogens/' + newPathogenKey] = pathogen;
                return database.ref().update(updates);
            }

            function loadCompoundsFromFirebase() {
                database.ref('/compounds').on('value', (snapshot) => {
                    compoundsData = [];
                    snapshot.forEach((childSnapshot) => {
                        const compound = childSnapshot.val();
                        compoundsData.push(compound);
                    });
                    renderCompoundsGrid();
                    updatePathogenCompoundList();
                });
            }

            function loadPathogensFromFirebase() {
                database.ref('/pathogens').on('value', (snapshot) => {
                    pathogensData = [];
                    snapshot.forEach((childSnapshot) => {
                        const pathogen = childSnapshot.val();
                        pathogensData.push(pathogen);
                    });
                    renderPathogensGrid();
                    updateDangerComparison();
                });
            }

            function deleteCompoundFromFirebase(compoundId) {
                return database.ref('/compounds/' + compoundId).remove();
            }

            function deletePathogenFromFirebase(pathogenId) {
                return database.ref('/pathogens/' + pathogenId).remove();
            }

            function clearAllCompoundsFromFirebase() {
                return database.ref('/compounds').remove();
            }

            function clearAllPathogensFromFirebase() {
                return database.ref('/pathogens').remove();
            }

            // Ÿàÿ∏ŸäŸÅÿ© ÿ™ÿ≠ŸÖŸäŸÑ JSON
            function downloadJSON(data, filename) {
                if (data.length === 0) {
                    showAlert(currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ™ŸÜÿ≤ŸäŸÑŸáÿß!' : 'No data to download!', 'error');
                    return;
                }
                const jsonString = JSON.stringify(data, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ±ŸÉÿ® ŸÉŸäŸÖŸäÿßÿ¶Ÿä
            compoundForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const newCompound = {
                    displayName: document.getElementById('c_displayName').value,
                    category: document.getElementById('c_category').value,
                    effectType: document.getElementById('c_effectType').value,
                    magnitude: parseFloat(document.getElementById('c_magnitude').value),
                    duration: parseFloat(document.getElementById('c_duration').value),
                    productionCost: parseFloat(document.getElementById('c_productionCost').value),
                    stackable: document.getElementById('c_stackable').checked,
                    maxStacks: parseInt(document.getElementById('c_maxStacks').value),
                    carrier: document.getElementById('c_carrier').value,
                    cooldown: parseFloat(document.getElementById('c_cooldown').value)
                };

                saveCompoundToFirebase(newCompound)
                    .then(() => {
                        showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ±ŸÉÿ® ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä ÿ®ŸÜÿ¨ÿßÿ≠!' : 'Chemical compound added successfully!', 'success');
                        compoundForm.reset();
                        document.getElementById('c_magnitude').value = "1.0";
                        document.getElementById('c_duration').value = "5.0";
                        document.getElementById('c_productionCost').value = "5.0";
                        document.getElementById('c_cooldown').value = "10.0";
                    })
                    .catch((error) => {
                        showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™: ' + error.message : 'Error saving data: ' + error.message, 'error');
                    });
            });

            // ÿπÿ±ÿ∂ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™
            function renderCompoundsGrid() {
                compoundsGrid.innerHTML = '';
                
                if (compoundsData.length === 0) {
                    compoundsGrid.innerHTML = `<p style="text-align: center; padding: 40px; grid-column: 1 / -1;">${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÑÿπÿ±ÿ∂Ÿáÿß' : 'No compounds to display'}</p>`;
                    return;
                }
                
                compoundsData.forEach(compound => {
                    const card = document.createElement('div');
                    card.className = `compound-card interactive-element ${selectedCompoundId === compound.id ? 'active' : ''}`;
                    card.dataset.id = compound.id;
                    
                    const icon = document.createElement('div');
                    icon.className = 'compound-icon';
                    icon.innerHTML = getCompoundIcon(compound.category);
                    
                    const header = document.createElement('div');
                    header.className = 'compound-card-header';
                    
                    const name = document.createElement('div');
                    name.className = 'compound-name';
                    name.textContent = compound.displayName;
                    
                    const category = document.createElement('div');
                    category.className = 'compound-category';
                    category.textContent = getCategoryName(compound.category);
                    
                    header.appendChild(icon);
                    const infoContainer = document.createElement('div');
                    infoContainer.appendChild(name);
                    infoContainer.appendChild(category);
                    header.appendChild(infoContainer);
                    
                    const details = document.createElement('div');
                    details.className = 'compound-details';
                    
                    // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
                    const effectType = document.createElement('div');
                    effectType.className = 'compound-attribute';
                    effectType.innerHTML = `<span class="compound-attribute-label">${currentLanguage === 'ar' ? 'ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±:' : 'Effect Type:'}</span><span class="compound-attribute-value">${getEffectTypeName(compound.effectType)}</span>`;
                    
                    const magnitudeDuration = document.createElement('div');
                    magnitudeDuration.className = 'compound-attribute';
                    magnitudeDuration.innerHTML = `<span class="compound-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÇŸàÿ©/ÿßŸÑŸÖÿØÿ©:' : 'Magnitude/Duration:'}</span><span class="compound-attribute-value">${compound.magnitude} / ${compound.duration}s</span>`;
                    
                    const costCooldown = document.createElement('div');
                    costCooldown.className = 'compound-attribute';
                    costCooldown.innerHTML = `<span class="compound-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÉŸÑŸÅÿ©/ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±:' : 'Cost/Cooldown:'}</span><span class="compound-attribute-value">${compound.productionCost} ATP / ${compound.cooldown}s</span>`;
                    
                    const carrier = document.createElement('div');
                    carrier.className = 'compound-attribute';
                    carrier.innerHTML = `<span class="compound-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÜÿßŸÇŸÑ:' : 'Carrier:'}</span><span class="compound-attribute-value">${getCarrierName(compound.carrier)}</span>`;
                    
                    details.appendChild(effectType);
                    details.appendChild(magnitudeDuration);
                    details.appendChild(costCooldown);
                    details.appendChild(carrier);
                    
                    // ÿ≤ÿ± ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ
                    const viewDetailBtn = document.createElement('button');
                    viewDetailBtn.className = 'btn';
                    viewDetailBtn.style.marginTop = '15px';
                    viewDetailBtn.style.width = '100%';
                    viewDetailBtn.innerHTML = `<i class="fas fa-info-circle"></i> ${currentLanguage === 'ar' ? 'ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ' : 'View Details'}`;
                    viewDetailBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        selectedCompoundId = compound.id;
                        showCompoundDetail(compound);
                    });
                    
                    // ÿ≤ÿ± ÿßŸÑÿ≠ÿ∞ŸÅ
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn btn-danger';
                    deleteBtn.style.marginTop = '10px';
                    deleteBtn.style.width = '100%';
                    deleteBtn.innerHTML = `<i class="fas fa-trash"></i> ${currentLanguage === 'ar' ? 'ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ±ŸÉÿ®' : 'Delete Compound'}`;
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        pendingDeleteAction = function() {
                            deleteCompoundFromFirebase(compound.id)
                                .then(() => {
                                    showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ®ŸÜÿ¨ÿßÿ≠!' : 'Compound deleted successfully!', 'success');
                                })
                                .catch((error) => {
                                    showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≠ÿ∞ŸÅ: ' + error.message : 'Error deleting: ' + error.message, 'error');
                                });
                        };
                        showPasswordModal();
                    });
                    
                    card.appendChild(header);
                    card.appendChild(details);
                    card.appendChild(viewDetailBtn);
                    card.appendChild(deleteBtn);
                    
                    card.addEventListener('click', function(e) {
                        // ŸÖŸÜÿπ ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ≠ÿØÿ´ ÿ•ÿ∞ÿß ÿ™ŸÖ ÿßŸÑŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
                        if (e.target.closest('button')) {
                            return;
                        }
                        selectedCompoundId = compound.id;
                        showCompoundDetail(compound);
                    });
                    compoundsGrid.appendChild(card);
                });
            }

            // ÿØÿßŸÑÿ© ŸÑŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÑŸÖŸäÿ© ÿπŸÜ ÿßŸÑŸÖÿ±ŸÉÿ®
            function getCompoundScientificInfo(compoundName) {
                const normalizedName = compoundName.toLowerCase().trim();
                
                console.log(`üîé ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ≠ŸÑŸä ÿπŸÜ: "${compoundName}" -> "${normalizedName}"`);
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇÿ© ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿ£ŸàŸÑÿßŸã
                for (const [name, info] of Object.entries(chemicalCompoundsDB)) {
                    if (name.toLowerCase() === normalizedName) {
                        console.log(`‚úÖ ŸÖÿ∑ÿßÿ®ŸÇÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©: ${name}`);
                        return { ...info, found: true, searchMethod: 'direct_match' };
                    }
                }
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©
                for (const [name, info] of Object.entries(chemicalCompoundsDB)) {
                    if (info.commonNames && info.commonNames.some(commonName => 
                        commonName.toLowerCase() === normalizedName)) {
                        console.log(`‚úÖ ŸÖÿ∑ÿßÿ®ŸÇÿ© ÿ®ÿßÿ≥ŸÖ ÿ¥ÿßÿ¶ÿπ: ${name} -> ${compoundName}`);
                        return { ...info, found: true, searchMethod: 'common_name' };
                    }
                }
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ¨ÿ≤ÿ¶Ÿä ÿßŸÑŸÖÿ≠ÿ≥ŸÜ
                for (const [name, info] of Object.entries(chemicalCompoundsDB)) {
                    const nameParts = normalizedName.split(' ').filter(part => part.length > 2);
                    const dbNameLower = name.toLowerCase();
                    
                    const isPartialMatch = nameParts.some(part => 
                        dbNameLower.includes(part) || 
                        (info.commonNames && info.commonNames.some(cn => cn.toLowerCase().includes(part)))
                    );
                    
                    if (isPartialMatch) {
                        console.log(`‚úÖ ŸÖÿ∑ÿßÿ®ŸÇÿ© ÿ¨ÿ≤ÿ¶Ÿäÿ©: ${name} -> ${compoundName}`);
                        return { ...info, found: true, searchMethod: 'partial_match' };
                    }
                }
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
                const keywordMatches = [];
                for (const [name, info] of Object.entries(chemicalCompoundsDB)) {
                    const searchText = `${name} ${info.commonNames ? info.commonNames.join(' ') : ''}`.toLowerCase();
                    if (searchText.includes(normalizedName) || normalizedName.includes(name.toLowerCase())) {
                        keywordMatches.push({ name, info, score: Math.max(
                            searchText.indexOf(normalizedName),
                            name.toLowerCase().indexOf(normalizedName)
                        ) });
                    }
                }
                
                if (keywordMatches.length > 0) {
                    // ÿ•ÿ±ÿ¨ÿßÿπ ÿ£ŸÅÿ∂ŸÑ ŸÖÿ∑ÿßÿ®ŸÇÿ©
                    const bestMatch = keywordMatches.sort((a, b) => b.score - a.score)[0];
                    console.log(`‚úÖ ŸÖÿ∑ÿßÿ®ŸÇÿ© ÿ®ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©: ${bestMatch.name} -> ${compoundName}`);
                    return { ...bestMatch.info, found: true, searchMethod: 'keyword_match' };
                }
                
                console.log(`‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${compoundName} ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©`);
                return { found: false };
            }



            // ÿØÿßŸÑÿ© ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÑŸÖŸäÿ© ŸÑŸÑŸÖÿ±ŸÉÿ®
            function displayScientificDetails(compound, container) {
            // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ verifyCompound ŸÑŸÑÿ™ÿ≠ŸÇŸÇ ÿ£ŸàŸÑÿßŸã
                    verifyCompound(compound).then(result => {
                        let scientificHTML = '';
                        
                        if (result.verified) {
                            const scientificInfo = result.scientificInfo;
                            
                            // ÿ™ÿ≠ÿØŸäÿØ ŸÑŸàŸÜ Ÿàÿ±ÿ≥ÿßŸÑÿ© ÿ≠ÿ≥ÿ® ŸÖÿµÿØÿ± ÿßŸÑÿ™ÿ≠ŸÇŸÇ
                            let verificationMessage = '';
                            let statusClass = 'search-success';
                            
                            switch(result.searchMethod || result.source) {
                                case 'direct_match':
                                case 'cid_match':
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ® ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ŸÖÿ∑ÿßÿ®ŸÇÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©)'
                                        : 'Compound found in database (direct match)';
                                    break;
                                case 'common_name':
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ® ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ÿßÿ≥ŸÖ ÿ¥ÿßÿ¶ÿπ)'
                                        : 'Compound found in database (common name)';
                                    break;
                                case 'partial_match':
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ® ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ŸÖÿ∑ÿßÿ®ŸÇÿ© ÿ¨ÿ≤ÿ¶Ÿäÿ©)'
                                        : 'Compound found in database (partial match)';
                                    statusClass = 'search-failed';
                                    break;
                                case 'keyword_match':
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖÿ±ŸÉÿ® ŸÖÿ¥ÿßÿ®Ÿá ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'
                                        : 'Similar compound found in database';
                                    statusClass = 'search-failed';
                                    break;
                                case 'pubchem':
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ±ŸÉÿ® ÿπÿ®ÿ± PubChem'
                                        : 'Compound verified via PubChem';
                                    break;
                                default:
                                    verificationMessage = currentLanguage === 'ar' 
                                        ? 'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ±ŸÉÿ®'
                                        : 'Compound verified';
                            }
                            
                            scientificHTML = `
                                <div class="scientific-details">
                                    <h3><i class="fas fa-flask"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÑŸÖŸäÿ©' : 'Scientific Details'}</h3>
                                    
                                    ${scientificInfo && scientificInfo.formula ? `
                                        <div class="chemical-formula">
                                            <strong>${currentLanguage === 'ar' ? 'ÿßŸÑÿµŸäÿ∫ÿ© ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©:' : 'Chemical Formula:'}</strong> ${scientificInfo.formula}
                                        </div>
                                    ` : ''}
                                    
                                    ${scientificInfo && scientificInfo.molecularWeight ? `
                                        <div class="detail-attribute">
                                            <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ¨ÿ≤Ÿäÿ¶Ÿä:' : 'Molecular Weight:'}</span>
                                            <span class="detail-attribute-value">${scientificInfo.molecularWeight} ${typeof scientificInfo.molecularWeight === 'number' ? 'g/mol' : ''}</span>
                                        </div>
                                    ` : ''}
                                    
                                    ${scientificInfo && scientificInfo.description ? `
                                        <div class="compound-description">
                                            ${scientificInfo.description[currentLanguage] || scientificInfo.description.en || scientificInfo.description}
                                        </div>
                                    ` : ''}
                                    
                                    ${scientificInfo && scientificInfo.commonNames && scientificInfo.commonNames.length > 0 ? `
                                        <div class="common-names">
                                            <strong>${currentLanguage === 'ar' ? 'ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©:' : 'Common Names:'}</strong>
                                            ${scientificInfo.commonNames.map(name => 
                                                `<span class="common-name">${name}</span>`
                                            ).join('')}
                                        </div>
                                    ` : ''}
                                    
                                    ${result.cid ? `
                                        <a href="https://pubchem.ncbi.nlm.nih.gov/compound/${result.cid}" 
                                        target="_blank" class="pubchem-link">
                                            <i class="fas fa-external-link-alt"></i> 
                                            ${currentLanguage === 'ar' ? 'ÿπÿ±ÿ∂ ŸÅŸä PubChem' : 'View in PubChem'}
                                        </a>
                                    ` : ''}
                                    
                                    <div class="search-status ${statusClass}">
                                        <i class="fas ${statusClass === 'search-success' ? 'fa-check-circle' : 'fa-exclamation-triangle'}"></i>
                                        ${verificationMessage}
                                        ${(result.searchMethod === 'partial_match' || result.searchMethod === 'keyword_match') ? 
                                            '<br><small>' + (currentLanguage === 'ar' ? 'ŸÇÿØ ŸäŸÉŸàŸÜ ŸáŸÜÿßŸÉ ÿßÿÆÿ™ŸÑÿßŸÅ ŸÅŸä ÿßŸÑÿ™ÿ≥ŸÖŸäÿ©' : 'There might be a naming difference') + '</small>' : ''}
                                    </div>
                                </div>
                            `;
                        } else {
                            scientificHTML = `
                                <div class="scientific-details">
                                    <h3><i class="fas fa-flask"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÑŸÖŸäÿ©' : 'Scientific Details'}</h3>
                                    
                                    <div class="unverified-warning">
                                        <h4><i class="fas fa-exclamation-triangle"></i> ${currentLanguage === 'ar' ? 'ÿ™ÿ≠ÿ∞Ÿäÿ±' : 'Warning'}</h4>
                                        <p>
                                            ${currentLanguage === 'ar' 
                                                ? 'Ÿáÿ∞ÿß ÿßŸÑŸÖÿ±ŸÉÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©. ŸÇÿØ ŸäŸÉŸàŸÜ ÿßÿ≥ŸÖŸá ŸÖŸÉÿ™Ÿàÿ®ÿßŸã ÿ®ÿ¥ŸÉŸÑ ŸÖÿÆÿ™ŸÑŸÅ ÿ£Ÿà ŸÇÿØ ŸäŸÉŸàŸÜ ŸÖÿ±ŸÉÿ®ÿßŸã ŸÖÿÆÿ™ÿ±ÿπÿßŸã ŸÑŸÑÿπÿ®ÿ©.'
                                                : 'This compound was not found in the scientific database. Its name might be spelled differently or it might be an invented compound for the game.'
                                            }
                                        </p>
                                    </div>
                                    
                                    <div class="search-status search-error">
                                        <i class="fas fa-exclamation-circle"></i>
                                        ${currentLanguage === 'ar' 
                                            ? 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ® ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©'
                                            : 'Compound not found in scientific database'
                                        }
                                    </div>
                                </div>
                            `;
                        }
                        
                        // ÿ•ÿ∂ÿßŸÅÿ© ÿ≤ÿ± ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿßÿ≥ŸÖ
                        scientificHTML += `
                            <div class="edit-name-section" style="margin-top: 15px;">
                                <button class="edit-name-btn" onclick="showNameEditForm('${compound.id}')">
                                    <i class="fas fa-edit"></i> 
                                    ${currentLanguage === 'ar' ? 'ÿ™ÿπÿØŸäŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ®' : 'Edit Compound Name'}
                                </button>
                                
                                <div class="name-edit-form" id="name-edit-form-${compound.id}" style="display: none;">
                                    <input type="text" class="name-edit-input" id="name-edit-input-${compound.id}" 
                                        value="${compound.displayName}" placeholder="${currentLanguage === 'ar' ? 'ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ® ÿßŸÑÿ¨ÿØŸäÿØ' : 'New compound name'}">
                                    <div class="name-edit-buttons">
                                        <button class="btn" onclick="updateCompoundName('${compound.id}')">
                                            <i class="fas fa-save"></i> ${currentLanguage === 'ar' ? 'ÿ≠ŸÅÿ∏' : 'Save'}
                                        </button>
                                        <button class="btn btn-danger" onclick="hideNameEditForm('${compound.id}')">
                                            <i class="fas fa-times"></i> ${currentLanguage === 'ar' ? 'ÿ•ŸÑÿ∫ÿßÿ°' : 'Cancel'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿßŸàŸäÿ©
                        const scientificContainer = document.createElement('div');
                        scientificContainer.innerHTML = scientificHTML;
                        container.appendChild(scientificContainer);
                    }).catch(error => {
                        console.error('Error in displayScientificDetails:', error);
                        container.innerHTML += `
                            <div class="scientific-details">
                                <div class="search-status search-error">
                                    <i class="fas fa-exclamation-circle"></i>
                                    ${currentLanguage === 'ar' 
                                        ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©'
                                        : 'Error occurred while searching for scientific information'
                                    }
                                </div>
                            </div>
                        `;
                    });
                }

            // ÿØŸàÿßŸÑ ŸÑÿ•ÿØÿßÿ±ÿ© ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° - ŸÅŸä ÿßŸÑŸÜÿ∑ÿßŸÇ ÿßŸÑÿπÿßŸÖ
            window.showNameEditForm = function(compoundId) {
                const form = document.getElementById(`name-edit-form-${compoundId}`);
                if (form) form.style.display = 'block';
            };

            window.hideNameEditForm = function(compoundId) {
                const form = document.getElementById(`name-edit-form-${compoundId}`);
                if (form) form.style.display = 'none';
            };

            window.updateCompoundName = function(compoundId) {
                const newNameInput = document.getElementById(`name-edit-input-${compoundId}`);
                if (!newNameInput) return;
                
                const newName = newNameInput.value.trim();
                
                if (!newName) {
                    showAlert(currentLanguage === 'ar' ? 'Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖ ÿ¨ÿØŸäÿØ ŸÑŸÑŸÖÿ±ŸÉÿ®' : 'Please enter a new compound name', 'error');
                    return;
                }
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ≥ŸÖ ŸÅŸä Firebase
                database.ref('/compounds/' + compoundId).update({
                    displayName: newName
                }).then(() => {
                    showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ®ŸÜÿ¨ÿßÿ≠' : 'Compound name updated successfully', 'success');
                    hideNameEditForm(compoundId);
                    
                    // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿπÿ±Ÿàÿ∂ÿßŸã
                    if (selectedCompoundId === compoundId) {
                        const updatedCompound = compoundsData.find(c => c.id === compoundId);
                        if (updatedCompound) {
                            showCompoundDetail(updatedCompound);
                        }
                    }
                    
                    // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ¥ÿ®ŸÉÿ©
                    renderCompoundsGrid();
                }).catch((error) => {
                    showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ≥ŸÖ: ' + error.message : 'Error updating name: ' + error.message, 'error');
                });
            };

            // ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ±ŸÉÿ®
            function showCompoundDetail(compound) {
                compoundDetail.style.display = 'block';
                compoundDetail.classList.add('slide-in');
                
                const icon = getCompoundIcon(compound.category);
                
                compoundDetail.innerHTML = `
                    <div class="detail-header">
                        <div class="detail-icon">${icon}</div>
                        <div class="detail-info">
                            <div class="detail-name">${compound.displayName}</div>
                            <div class="detail-category">${getCategoryName(compound.category)}</div>
                        </div>
                        <button class="btn btn-danger" id="close-compound-detail-btn"><i class="fas fa-times"></i> ${currentLanguage === 'ar' ? 'ÿ•ÿ∫ŸÑÿßŸÇ' : 'Close'}</button>
                    </div>
                    <div class="detail-sections">
                        <div class="detail-section">
                            <h3><i class="fas fa-file-alt"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©' : 'Basic Information'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ÿµŸÜŸäŸÅ:' : 'Category:'}</span>
                                    <span class="detail-attribute-value">${getCategoryName(compound.category)}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÜÿßŸÇŸÑ:' : 'Carrier:'}</span>
                                    <span class="detail-attribute-value">${getCarrierName(compound.carrier)}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ:' : 'Stackable:'}</span>
                                    <span class="detail-attribute-value">${compound.stackable ? (currentLanguage === 'ar' ? 'ŸÜÿπŸÖ' : 'Yes') : (currentLanguage === 'ar' ? 'ŸÑÿß' : 'No')}</span>
                                </div>
                                ${compound.stackable ? `
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ™ÿ±ÿßŸÉŸÖ:' : 'Max Stacks:'}</span>
                                    <span class="detail-attribute-value">${compound.maxStacks}</span>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-atom"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± ŸàÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ' : 'Effect and Balance'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±:' : 'Effect Type:'}</span>
                                    <span class="detail-attribute-value">${getEffectTypeName(compound.effectType)}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÇŸàÿ©:' : 'Magnitude:'}</span>
                                    <span class="detail-attribute-value">${compound.magnitude}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿØÿ©:' : 'Duration:'}</span>
                                    <span class="detail-attribute-value">${compound.duration} ${currentLanguage === 'ar' ? 'ÿ´ÿßŸÜŸäÿ©' : 'seconds'}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿ™ŸÉŸÑŸÅÿ© ÿßŸÑÿ•ŸÜÿ™ÿßÿ¨:' : 'Production Cost:'}</span>
                                    <span class="detail-attribute-value">${compound.productionCost} ATP</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-rocket"></i> ${currentLanguage === 'ar' ? 'ÿ¢ŸÑŸäÿ© ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇ' : 'Release Mechanism'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÅÿ™ÿ±ÿ© ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±:' : 'Cooldown:'}</span>
                                    <span class="detail-attribute-value">${compound.cooldown} ${currentLanguage === 'ar' ? 'ÿ´ÿßŸÜŸäÿ©' : 'seconds'}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÑŸÖŸäÿ©
                displayScientificDetails(compound, compoundDetail);
                
                document.getElementById('close-compound-detail-btn').addEventListener('click', function() {
                    compoundDetail.style.display = 'none';
                    compoundDetail.classList.remove('slide-in');
                });
                
                // ÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿ£ÿπŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ©
                compoundDetail.scrollIntoView({ behavior: 'smooth' });
            }

            // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÅŸä ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™
            function updatePathogenCompoundList() {
                pathogenCompoundSelect.innerHTML = '';
                pathogenImmuneToSelect.innerHTML = '';
                
                compoundsData.forEach(compound => {
                    // ŸÑŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©: ÿπÿ±ÿ∂ ŸÅŸÇÿ∑ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÜÿßŸÇŸÑŸáÿß "ŸÖŸÖÿ±ÿ∂"
                    if (compound.carrier === 'Pathogen') {
                        const option = document.createElement('option');
                        option.value = compound.displayName;
                        option.textContent = `${compound.displayName} (${getCategoryName(compound.category)})`;
                        pathogenCompoundSelect.appendChild(option);
                    }
                    
                    // ŸÑŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß: ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ° ÿßŸÑÿ£ÿ¨ÿ≥ÿßŸÖ ÿßŸÑŸÖÿ∂ÿßÿØÿ©
                    if (compound.category !== 'Antibody') {
                        const immuneOption = document.createElement('option');
                        immuneOption.value = compound.displayName;
                        immuneOption.textContent = `${compound.displayName} (${getCategoryName(compound.category)})`;
                        pathogenImmuneToSelect.appendChild(immuneOption);
                    }
                });
            }

            // ÿ™ŸàŸÑŸäÿØ ŸÇŸäŸÖ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÖŸÜ 1 ÿ•ŸÑŸâ 3
            function getRandomValue(min = 1, max = 3) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            // ÿ™ŸàŸÑŸäÿØ ŸÖÿ±ŸÉÿ® ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÖŸÜ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ©
            function generateRandomCompounds(count = 1, excludeAntibodies = true, excludeExisting = [], isImmune = false) {
                if (compoundsData.length === 0) {
                    return [currentLanguage === 'ar' ? 'ŸÖÿ∂ÿßÿØ ÿ≠ŸäŸàŸä ŸÖÿ™ÿ∑Ÿàÿ±' : 'Advanced Antibiotic'];
                }
                
                const result = [];
                const usedIndices = new Set();
                
                // ÿ™ÿµŸÅŸäÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±ÿ∑
                const filteredCompounds = compoundsData.filter(compound => {
                    if (excludeAntibodies && compound.category === 'Antibody') {
                        return false;
                    }
                    // ÿßÿ≥ÿ™ÿ®ÿπÿßÿØ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ÿ®ÿßŸÑŸÅÿπŸÑ ŸÅŸä excludeExisting
                    if (excludeExisting.includes(compound.displayName)) {
                        return false;
                    }
                    if (!isImmune && compound.carrier !== 'Pathogen') {
                        return false;
                    }
                    return true;

                });
                
                if (filteredCompounds.length === 0) {
                    return [currentLanguage === 'ar' ? 'ŸÖÿ∂ÿßÿØ ÿ≠ŸäŸàŸä ŸÖÿ™ÿ∑Ÿàÿ±' : 'Advanced Antibiotic'];
                }
                
                for (let i = 0; i < count && usedIndices.size < filteredCompounds.length; i++) {
                    let randomIndex;
                    do {
                        randomIndex = Math.floor(Math.random() * filteredCompounds.length);
                    } while (usedIndices.has(randomIndex));
                    
                    usedIndices.add(randomIndex);
                    result.push(filteredCompounds[randomIndex].displayName);
                }
                
                return result;
            }

            // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ≥ŸÑŸàŸÉ ŸÑŸÑÿ™ÿ∑Ÿàÿ± C
            function getNewBehavior(currentBehavior) {
                const behaviors = currentLanguage === 'ar' ? ['ÿπÿØŸàÿßŸÜŸä', 'ŸÖÿ™ÿπÿßŸàŸÜ', 'ÿØŸÅÿßÿπŸä'] : ['Aggressive', 'Cooperative', 'Defensive'];
                const currentIndex = behaviors.indexOf(currentBehavior);
                let newIndex;
                
                do {
                    newIndex = Math.floor(Math.random() * behaviors.length);
                } while (newIndex === currentIndex);
                
                return behaviors[newIndex];
            }

            // ÿ™ŸàŸÑŸäÿØ ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÑÿÆÿµÿßÿ¶ÿµ ÿßŸÑÿ™ÿ∑Ÿàÿ±ÿßÿ™ - ŸÖÿ≠ÿ≥ŸÜÿ©
            function generateRandomEvolutionProperties(originalPathogen, evolutionType) {
                const properties = {
                    title: '',
                    description: '',
                    healthChange: 0,
                    speedChange: 0,
                    reproAmountChange: 0,
                    reproPeriodChange: 0,
                    oxygenChange: 0,
                    glucoseChange: 0,
                    hideEfficiencyChange: 0,
                    behavior: originalPathogen.behavior,
                    newCompounds: [],
                    immuneCompounds: [],
                    summary: '',
                    evolutionRate: 0 // ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿßŸÑÿπÿßŸÖÿ©
                };
                
                // ÿ™ŸàŸÑŸäÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ÿ£ŸÉÿ´ÿ± ÿ™ŸÜŸàÿπÿßŸã
                const getRandomIncrease = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
                const getRandomDecrease = (min, max) => -(Math.floor(Math.random() * (max - min + 1)) + min);
                const getRandomChange = (min, max) => {
                    const value = Math.floor(Math.random() * (max - min + 1)) + min;
                    return Math.random() > 0.5 ? value : -value;
                };
                
                // ÿ™ŸàŸÑŸäÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÑŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ (2-10)
                const compoundChanges = getRandomIncrease(2, 10);
                
                // ÿ™ŸàŸÑŸäÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÑŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ (1-4)
                const statChanges = getRandomIncrease(1, 4);
                
                // ÿ™ŸàŸÑŸäÿØ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÖÿπ ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ŸÜŸÇÿµ (20%-50%)
                const getRandomChangeWithDecrease = () => {
                    if (Math.random() < 0.3) { // 30% ŸÅÿ±ÿµÿ© ŸÑŸÑŸÜŸÇÿµ
                        return getRandomDecrease(1, Math.floor(statChanges * 0.5)); // ŸÜŸÇÿµ ÿ≠ÿ™Ÿâ 50%
                    }
                    return getRandomIncrease(1, statChanges);
                };
                
                // ÿ™ŸàŸÑŸäÿØ ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÑŸÑÿÆÿµÿßÿ¶ÿµ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ŸÜŸàÿπ ÿßŸÑÿ™ÿ∑Ÿàÿ±
                switch(evolutionType) {
                    case 'A':
                        properties.title = currentLanguage === 'ar' ? 'ŸÜÿ¨ÿßÿ© ŸÖÿ™ŸÇÿØŸÖÿ©' : 'Advanced Survival';
                        properties.oxygenChange = getRandomDecrease(1, 3);
                        properties.glucoseChange = getRandomDecrease(1, 2);
                        properties.healthChange = getRandomChangeWithDecrease();
                        properties.speedChange = getRandomChange(-1, 2) * 0.2;
                        properties.newCompounds = generateRandomCompounds(getRandomIncrease(2, 4), true, originalPathogen.compoundsProduced || []);
                        properties.summary = currentLanguage === 'ar' 
                            ? `ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÉŸÅÿßÿ°ÿ©: ‚¨áÔ∏èÿ£ŸÉÿ≥ÿ¨ŸäŸÜ -3ÿå ‚¨áÔ∏èÿ¨ŸÑŸàŸÉŸàÿ≤ -2ÿå ‚¨áÔ∏èÿµÿ≠ÿ© -1`
                            : `Efficiency improved: ‚¨áÔ∏èOxygen -3, ‚¨áÔ∏èGlucose -2, ‚¨áÔ∏èHealth -1`;
                        properties.evolutionRate = 33;
                        break;
                    case 'B':
                        properties.title = currentLanguage === 'ar' ? 'ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖÿ™ÿ∑Ÿàÿ±ÿ©' : 'Advanced Compounds';
                        properties.newCompounds = generateRandomCompounds(getRandomIncrease(1, 2), true, originalPathogen.compoundsProduced || []);
                        properties.immuneCompounds = generateRandomCompounds(getRandomIncrease(1, 2), true, originalPathogen.immuneToCompounds || [], true);
                        properties.healthChange = getRandomChangeWithDecrease();
                        properties.speedChange = getRandomChange(-1, 1) * 0.1;
                        properties.reproAmountChange = getRandomChange(0, 1);
                        properties.summary = currentLanguage === 'ar' 
                            ? `ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™: ‚ûï1 ŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©ÿå üõ°Ô∏è4 ŸÖŸÜÿßÿπÿ©`
                            : `Compounds enhanced: ‚ûï1 new compounds, üõ°Ô∏è4 immunities`;
                        properties.evolutionRate = 33;
                        break;
                    case 'C':
                        properties.title = currentLanguage === 'ar' ? 'ÿ™ÿ∫Ÿäÿ± ÿ≥ŸÑŸàŸÉŸä' : 'Behavioral Change';
                        properties.behavior = getNewBehavior(originalPathogen.behavior);
                        properties.reproAmountChange = getRandomIncrease(1, 3);
                        properties.reproPeriodChange = getRandomDecrease(1, 3) * 0.5;
                        properties.hideEfficiencyChange = getRandomChange(0, 4) * 0.2;
                        properties.healthChange = getRandomChange(-2, 2);
                        properties.summary = currentLanguage === 'ar' 
                            ? `ÿ™ÿ≠ŸàŸÑ ÿ≥ŸÑŸàŸÉŸä: üîÑÿØŸÅÿßÿπŸäÿå ‚¨ÜÔ∏èÿ™ŸÉÿßÿ´ÿ± 3`
                            : `Behavioral shift: üîÑDefensive, ‚¨ÜÔ∏èReproduction 3`;
                        properties.evolutionRate = 22;
                        break;
                    case 'D':
                        properties.title = currentLanguage === 'ar' ? 'ÿ™ÿ∑Ÿàÿ± ŸÖÿÆÿ™ŸÑÿ∑' : 'Mixed Evolution';
                        // ÿ™ÿ∑Ÿàÿ± ŸÖÿÆÿ™ŸÑÿ∑ ŸÖÿπ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿ•Ÿäÿ¨ÿßÿ®Ÿäÿ© Ÿàÿ≥ŸÑÿ®Ÿäÿ©
                        properties.healthChange = 3;
                        properties.speedChange = getRandomChange(-2, 3) * 0.2;
                        properties.oxygenChange = getRandomChange(-2, 2);
                        properties.glucoseChange = getRandomChange(-2, 2);
                        properties.reproAmountChange = getRandomChange(-1, 2);
                        properties.newCompounds = generateRandomCompounds(1, true, originalPathogen.compoundsProduced || []);
                        properties.immuneCompounds = generateRandomCompounds(getRandomIncrease(0, 1), true, originalPathogen.immuneToCompounds || [], true);
                        properties.summary = currentLanguage === 'ar' 
                            ? `ÿ™ÿ∑Ÿàÿ± ŸÖÿ™Ÿàÿßÿ≤ŸÜ: ‚¨ÜÔ∏èÿµÿ≠ÿ© 3ÿå ‚ûï1 ŸÖÿ±ŸÉÿ®ÿßÿ™`
                            : `Balanced evolution: ‚¨ÜÔ∏èHealth 3, ‚ûï1 compounds`;
                        properties.evolutionRate = 22;
                        break;
                }
                
                properties.summary += currentLanguage === 'ar' ? ` | üìà ${properties.evolutionRate}% ÿ™ÿ∑Ÿàÿ±` : ` | üìà ${properties.evolutionRate}% evolution`;
                
                return properties;
            }

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÖÿ±ÿ∂ ŸÖÿπ ÿßŸÑÿ™ÿ∑Ÿàÿ±ÿßÿ™
            pathogenForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const selectedOptions = Array.from(pathogenCompoundSelect.selectedOptions);
                const compoundsProducedNames = selectedOptions.map(option => option.value);
                
                const selectedImmuneOptions = Array.from(pathogenImmuneToSelect.selectedOptions);
                const immuneToCompoundsNames = selectedImmuneOptions.map(option => option.value);

                // ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ™ÿ∑Ÿàÿ±ÿßÿ™ ŸÖÿπ ÿÆÿµÿßÿ¶ÿµ ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ©
                const evolutions = {};
                const evolutionTypes = ['A', 'B', 'C', 'D'];
                
                evolutionTypes.forEach(type => {
                    const evolutionProperties = generateRandomEvolutionProperties({
                        behavior: pathogenBehaviorSelect.value,
                        compoundsProduced: compoundsProducedNames,
                        immuneToCompounds: immuneToCompoundsNames
                    }, type);
                    
                    evolutions[type] = {
                        type: type,
                        title: evolutionProperties.title,
                        description: evolutionProperties.description,
                        healthChange: evolutionProperties.healthChange,
                        speedChange: evolutionProperties.speedChange,
                        reproAmountChange: evolutionProperties.reproAmountChange,
                        reproPeriodChange: evolutionProperties.reproPeriodChange,
                        oxygenChange: evolutionProperties.oxygenChange,
                        glucoseChange: evolutionProperties.glucoseChange,
                        hideEfficiencyChange: evolutionProperties.hideEfficiencyChange,
                        behavior: evolutionProperties.behavior,
                        newCompounds: evolutionProperties.newCompounds,
                        immuneCompounds: evolutionProperties.immuneCompounds,
                        summary: evolutionProperties.summary,
                        evolutionRate: evolutionProperties.evolutionRate
                    };
                });

                const newPathogen = {
                    displayName: document.getElementById('p_displayName').value,
                    category: document.getElementById('p_category').value,
                    health: parseFloat(document.getElementById('p_health').value),
                    moveSpeed: parseFloat(document.getElementById('p_moveSpeed').value),
                    reproPeriod: parseFloat(document.getElementById('p_reproPeriod').value),
                    reproAmount: parseInt(document.getElementById('p_reproAmount').value),
                    minHealthForReproduction: parseFloat(document.getElementById('p_minHealth').value),
                    requiredOxygen: parseInt(document.getElementById('p_reqOxygen').value),
                    requiredGlucose: parseInt(document.getElementById('p_reqGlucose').value),
                    canHide: document.getElementById('p_canHide').checked,
                    hideEfficiency: parseFloat(document.getElementById('p_hideEfficiency').value),
                    autoHideFrequency: parseFloat(document.getElementById('p_autoHideFrequency').value),
                    behavior: pathogenBehaviorSelect.value,
                    compoundsProduced: compoundsProducedNames,
                    immuneToCompounds: immuneToCompoundsNames,
                    evolutions: evolutions
                };

                savePathogenToFirebase(newPathogen)
                    .then(() => {
                        showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ ÿ®ŸÜÿ¨ÿßÿ≠!' : 'Pathogen added successfully!', 'success');
                        pathogenForm.reset();
                        document.getElementById('p_health').value = "10.0";
                        document.getElementById('p_moveSpeed').value = "1.0";
                        document.getElementById('p_reproPeriod').value = "10.0";
                        document.getElementById('p_reproAmount').value = "2";
                        document.getElementById('p_minHealth').value = "0.8";
                        document.getElementById('p_reqOxygen').value = "5";
                        document.getElementById('p_reqGlucose').value = "3";
                        document.getElementById('p_hideEfficiency').value = "1.0";
                        document.getElementById('p_autoHideFrequency').value = "2.0";
                        document.getElementById('p_behavior').value = currentLanguage === 'ar' ? "ÿπÿØŸàÿßŸÜŸä" : "Aggressive";
                    })
                    .catch((error) => {
                        showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™: ' + error.message : 'Error saving data: ' + error.message, 'error');
                    });
            });

            // ÿπÿ±ÿ∂ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™
            function renderPathogensGrid() {
                pathogensGrid.innerHTML = '';
                
                if (pathogensData.length === 0) {
                    pathogensGrid.innerHTML = `<p style="text-align: center; padding: 40px; grid-column: 1 / -1;">${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÖÿ±ÿ∂ÿßÿ™ ŸÑÿπÿ±ÿ∂Ÿáÿß' : 'No pathogens to display'}</p>`;
                    return;
                }
                
                pathogensData.forEach(pathogen => {
                    const card = document.createElement('div');
                    card.className = `pathogen-card interactive-element ${selectedPathogenId === pathogen.id ? 'active' : ''}`;
                    card.dataset.id = pathogen.id;
                    
                    const icon = document.createElement('div');
                    icon.className = 'pathogen-icon';
                    icon.innerHTML = getPathogenIcon(pathogen.category);
                    
                    const header = document.createElement('div');
                    header.className = 'pathogen-card-header';
                    
                    const name = document.createElement('div');
                    name.className = 'pathogen-name';
                    name.textContent = pathogen.displayName;
                    
                    const category = document.createElement('div');
                    category.className = 'pathogen-category';
                    category.textContent = getPathogenCategoryName(pathogen.category);
                    
                    header.appendChild(icon);
                    const infoContainer = document.createElement('div');
                    infoContainer.appendChild(name);
                    infoContainer.appendChild(category);
                    header.appendChild(infoContainer);
                    
                    const details = document.createElement('div');
                    details.className = 'pathogen-details';
                    
                    // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
                    const healthSpeed = document.createElement('div');
                    healthSpeed.className = 'pathogen-attribute';
                    healthSpeed.innerHTML = `<span class="pathogen-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿµÿ≠ÿ©:' : 'Health:'}</span><span class="pathogen-attribute-value">${pathogen.health}</span>`;
                    
                    const reproduction = document.createElement('div');
                    reproduction.className = 'pathogen-attribute';
                    reproduction.innerHTML = `<span class="pathogen-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction:'}</span><span class="pathogen-attribute-value">${pathogen.reproAmount} ${currentLanguage === 'ar' ? 'ŸÉŸÑ' : 'every'} ${pathogen.reproPeriod}${currentLanguage === 'ar' ? 'ÿ´' : 's'}</span>`;
                    
                    const requirements = document.createElement('div');
                    requirements.className = 'pathogen-attribute';
                    requirements.innerHTML = `<span class="pathogen-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™:' : 'Requirements:'}</span><span class="pathogen-attribute-value">${pathogen.requiredOxygen} O‚ÇÇ / ${pathogen.requiredGlucose} G</span>`;
                    
                    details.appendChild(healthSpeed);
                    details.appendChild(reproduction);
                    details.appendChild(requirements);
                    
                    // ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© (ÿπÿ±ÿ∂ ÿ£ŸàŸÑ 3 ŸÅŸÇÿ∑)
                    const compoundsContainer = document.createElement('div');
                    compoundsContainer.className = 'pathogen-compounds';
                    
                    if (pathogen.compoundsProduced && Array.isArray(pathogen.compoundsProduced)) {
                        const displayedCompounds = pathogen.compoundsProduced.slice(0, 3);
                        displayedCompounds.forEach(compoundName => {
                            const compoundTag = document.createElement('span');
                            compoundTag.className = 'pathogen-compound';
                            compoundTag.textContent = compoundName;
                            compoundsContainer.appendChild(compoundTag);
                        });
                        
                        if (pathogen.compoundsProduced.length > 3) {
                            const moreTag = document.createElement('span');
                            moreTag.className = 'pathogen-compound';
                            moreTag.textContent = `+${pathogen.compoundsProduced.length - 3}`;
                            moreTag.style.background = 'rgba(255, 215, 0, 0.3)';
                            moreTag.style.color = 'var(--accent-primary)';
                            compoundsContainer.appendChild(moreTag);
                        }
                    }
                    
                    details.appendChild(compoundsContainer);
                    
                    // ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸá ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß (ÿπÿ±ÿ∂ ÿ£ŸàŸÑ 3 ŸÅŸÇÿ∑)
                    const immuneCompoundsContainer = document.createElement('div');
                    immuneCompoundsContainer.className = 'pathogen-immune-compounds';
                    
                    if (pathogen.immuneToCompounds && Array.isArray(pathogen.immuneToCompounds)) {
                        const displayedImmuneCompounds = pathogen.immuneToCompounds.slice(0, 3);
                        displayedImmuneCompounds.forEach(compoundName => {
                            const compoundTag = document.createElement('span');
                            compoundTag.className = 'pathogen-immune-compound';
                            compoundTag.textContent = compoundName;
                            immuneCompoundsContainer.appendChild(compoundTag);
                        });
                        
                        if (pathogen.immuneToCompounds.length > 3) {
                            const moreTag = document.createElement('span');
                            moreTag.className = 'pathogen-immune-compound';
                            moreTag.textContent = `+${pathogen.immuneToCompounds.length - 3}`;
                            moreTag.style.background = 'rgba(255, 215, 0, 0.3)';
                            moreTag.style.color = 'var(--accent-primary)';
                            immuneCompoundsContainer.appendChild(moreTag);
                        }
                    }
                    
                    details.appendChild(immuneCompoundsContainer);
                    
                    // ÿ≤ÿ± ÿπÿ±ÿ∂ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ±
                    const viewTreeBtn = document.createElement('button');
                    viewTreeBtn.className = 'btn';
                    viewTreeBtn.style.marginTop = '15px';
                    viewTreeBtn.style.width = '100%';
                    viewTreeBtn.innerHTML = `<i class="fas fa-sitemap"></i> ${currentLanguage === 'ar' ? 'ÿπÿ±ÿ∂ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ±' : 'View Evolution Tree'}`;
                    viewTreeBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        selectedPathogenId = pathogen.id;
                        renderEvolutionTree(pathogen.id);
                        evolutionTreeContainer.style.display = 'block';
                        // ÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿ£ÿπŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ©
                        evolutionTreeContainer.scrollIntoView({ behavior: 'smooth' });
                    });
                    
                    // ÿ≤ÿ± ÿßŸÑÿ≠ÿ∞ŸÅ
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn btn-danger';
                    deleteBtn.style.marginTop = '10px';
                    deleteBtn.style.width = '100%';
                    deleteBtn.innerHTML = `<i class="fas fa-trash"></i> ${currentLanguage === 'ar' ? 'ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÖÿ±ÿ∂' : 'Delete Pathogen'}`;
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        pendingDeleteAction = function() {
                            deletePathogenFromFirebase(pathogen.id)
                                .then(() => {
                                    showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÖÿ±ÿ∂ ÿ®ŸÜÿ¨ÿßÿ≠!' : 'Pathogen deleted successfully!', 'success');
                                })
                                .catch((error) => {
                                    showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≠ÿ∞ŸÅ: ' + error.message : 'Error deleting: ' + error.message, 'error');
                                });
                        };
                        showPasswordModal();
                    });
                    
                    card.appendChild(header);
                    card.appendChild(details);
                    card.appendChild(viewTreeBtn);
                    card.appendChild(deleteBtn);
                    
                    pathogensGrid.appendChild(card);
                });
            }

            // ÿπÿ±ÿ∂ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ D3.js - ŸÖÿ≠ÿ≥ŸÜÿ© ŸÑŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ©
            function renderEvolutionTree(pathogenId) {
                evolutionTree.innerHTML = '';
                
                if (!pathogenId || pathogensData.length === 0) {
                    evolutionTree.innerHTML = `<p style="text-align: center; padding: 40px;">${currentLanguage === 'ar' ? 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸÖÿ±ÿ∂' : 'Pathogen not found'}</p>`;
                    return;
                }
                
                const pathogen = pathogensData.find(p => p.id === pathogenId);
                if (!pathogen) {
                    evolutionTree.innerHTML = `<p style="text-align: center; padding: 40px;">${currentLanguage === 'ar' ? 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸÖÿ±ÿ∂' : 'Pathogen not found'}</p>`;
                    return;
                }
                
                // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä
                const margin = { top: 40, right: 40, bottom: 40, left: 40 };
                const containerWidth = evolutionTree.clientWidth;
                const containerHeight = evolutionTree.clientHeight;
                
                // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿ®ÿπÿßÿØ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ≠ÿßŸàŸäÿ©
                const width = Math.max(containerWidth - margin.right - margin.left, 600);
                const height = Math.max(containerHeight - margin.top - margin.bottom, 400);
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿ¥ÿ¨ÿ±ÿ© D3
                const tree = d3.tree().size([height, width - 200]);
                
                // ÿ®ŸÜÿßÿ° ŸáŸäŸÉŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ¥ÿ¨ÿ±ÿ© D3.js
                const treeData = buildD3TreeData(pathogen);
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ≥ŸÑÿ≥ŸÑ ÿßŸÑŸáÿ±ŸÖŸä ŸÑŸÑÿ¥ÿ¨ÿ±ÿ©
                const root = d3.hierarchy(treeData);
                tree(root);
                
                // ÿ•ŸÜÿ¥ÿßÿ° SVG
                const svg = d3.select("#evolution-tree")
                    .append("svg")
                    .attr("width", width + margin.right + margin.left)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", `translate(${margin.left},${margin.top})`);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑
                const diagonal = d3.linkHorizontal()
                    .x(d => d.y)
                    .y(d => d.x);

                svg.selectAll(".evolution-link")
                    .data(root.links())
                    .enter()
                    .append("path")
                    .attr("class", "evolution-link")
                    .attr("fill", "none")
                    .attr("stroke", "#ccc")
                    .attr("d", diagonal);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÇÿØ ÿßŸÑŸÜÿµŸäÿ© ÿ®ÿØŸÑÿßŸã ŸÖŸÜ ÿßŸÑÿØŸàÿßÿ¶ÿ±
                const node = svg.selectAll(".evolution-node")
                    .data(root.descendants())
                    .enter()
                    .append("g")
                    .attr("class", d => `evolution-node ${d.data.type}`)
                    .attr("transform", d => `translate(${d.y},${d.x})`);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ÿ∑ŸäŸÑÿßÿ™ ŸÑŸÑÿπŸÇÿØ ÿßŸÑŸÜÿµŸäÿ©
                node.append("rect")
                    .attr("x", -60)
                    .attr("y", -15)
                    .attr("width", 120)
                    .attr("height", 30)
                    .attr("rx", 8)
                    .attr("ry", 8);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÜÿµ ŸÑŸÑÿπŸÇÿØ
                node.append("text")
                    .attr("dy", ".35em")
                    .attr("text-anchor", "middle")
                    .text(d => d.data.name);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ŸàÿµŸÅ ÿßŸÑÿ™ÿ∑Ÿàÿ± ŸÑŸÑÿπŸÇÿØ ÿßŸÑŸÅÿ±ÿπŸäÿ©
                node.filter(d => d.data.description)
                    .append("text")
                    .attr("class", "evolution-description")
                    .attr("dy", "1.5em")
                    .attr("text-anchor", "middle")
                    .text(d => d.data.description);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπÿßŸÑÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ŸÑŸÑÿπŸÇÿØ
                node.on("click", function(event, d) {
                    // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÜÿ¥ÿßÿ∑ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÇÿØ
                    d3.selectAll(".evolution-node").classed("active", false);
                    // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÜÿ¥ÿßÿ∑ ŸÑŸÑÿπŸÇÿØÿ© ÿßŸÑŸÖÿÆÿ™ÿßÿ±ÿ©
                    d3.select(this).classed("active", true);
                    
                    // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ŸÜŸàÿπ ÿßŸÑÿπŸÇÿØÿ© ŸÖŸÜ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    if (d.data.type === 'original') {
                        showPathogenDetail(pathogen);
                    } else if (d.data.type === 'evolution-a' && pathogen.evolutions) {
                        showEvolutionDetail(pathogen, pathogen.evolutions.A);
                    } else if (d.data.type === 'evolution-b' && pathogen.evolutions) {
                        showEvolutionDetail(pathogen, pathogen.evolutions.B);
                    } else if (d.data.type === 'evolution-c' && pathogen.evolutions) {
                        showEvolutionDetail(pathogen, pathogen.evolutions.C);
                    } else if (d.data.type === 'evolution-d' && pathogen.evolutions) {
                        showEvolutionDetail(pathogen, pathogen.evolutions.D);
                    }
                });
            }

            // ÿ®ŸÜÿßÿ° ŸáŸäŸÉŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ¥ÿ¨ÿ±ÿ© D3.js
            function buildD3TreeData(pathogen) {
                const root = {
                    name: pathogen.displayName,
                    type: 'original',
                    children: []
                };

                if (pathogen.evolutions) {
                    Object.values(pathogen.evolutions).forEach(evolution => {
                        // ÿ™ŸÇÿ≥ŸäŸÖ ÿßŸÑŸàÿµŸÅ ÿ•ŸÑŸâ ÿ£ÿ¨ÿ≤ÿßÿ° ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ±ŸÖÿ≤ "|"
                        const descriptionParts = evolution.summary.split(' | ');
                        
                        const evolutionNode = {
                            name: `${pathogen.displayName} ${evolution.type}`,
                            type: `evolution-${evolution.type.toLowerCase()}`,
                            children: []
                        };

                        // ŸÖÿπÿßŸÑÿ¨ÿ© ŸÉŸÑ ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑŸàÿµŸÅ
                        descriptionParts.forEach((part, index) => {
                            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ¨ÿ≤ÿ° Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ŸÅŸàÿßÿµŸÑÿå ŸÜŸÇÿ≥ŸÖŸá ÿ£ŸÉÿ´ÿ±
                            if (part.includes('ÿå')) {
                                const subParts = part.split('ÿå ');
                                subParts.forEach((subPart, subIndex) => {
                                    evolutionNode.children.push({
                                        name: subPart.trim(),
                                        type: `description-${index + 1}-${subIndex + 1}`
                                    });
                                });
                            } else {
                                evolutionNode.children.push({
                                    name: part,
                                    type: `description-part-${index + 1}`
                                });
                            }
                        });

                        root.children.push(evolutionNode);
                    });
                }

                return root;
            }

            // ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸÖÿ±ÿ∂ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ± - ŸÖÿπÿØŸÑÿ© ŸÑÿØÿπŸÖ ÿßŸÑŸÑÿ∫ÿ©
            function showEvolutionDetail(originalPathogen, evolution) {
                pathogenDetail.style.display = 'block';
                pathogenDetail.classList.add('slide-in');
                
                const icon = getPathogenIcon(originalPathogen.category);
                
                // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™
                const newHealth = originalPathogen.health + evolution.healthChange;
                const newSpeed = originalPathogen.moveSpeed + evolution.speedChange;
                const newReproAmount = originalPathogen.reproAmount + evolution.reproAmountChange;
                const newReproPeriod = originalPathogen.reproPeriod + evolution.reproPeriodChange;
                const newOxygen = originalPathogen.requiredOxygen + evolution.oxygenChange;
                const newGlucose = originalPathogen.requiredGlucose + evolution.glucoseChange;
                const newHideEfficiency = originalPathogen.hideEfficiency + evolution.hideEfficiencyChange;
                
                // ÿ®ŸÜÿßÿ° HTML ŸÖÿπ ÿØÿπŸÖ ÿßŸÑŸÑÿ∫ÿ©
                pathogenDetail.innerHTML = `
                    <div class="detail-header">
                        <div class="detail-icon">${icon}</div>
                        <div class="detail-info">
                            <div class="detail-name">E. coli ${evolution.type}</div>
                            <div class="detail-category">${getPathogenCategoryName(originalPathogen.category)} - <span data-ar="ÿ™ÿ∑Ÿàÿ±" data-en="Evolution">${currentLanguage === 'ar' ? 'ÿ™ÿ∑Ÿàÿ±' : 'Evolution'}</span> ${evolution.type}</div>
                        </div>
                        <button class="btn btn-danger" id="close-detail-btn"><i class="fas fa-times"></i> <span data-ar="ÿ•ÿ∫ŸÑÿßŸÇ" data-en="Close">${currentLanguage === 'ar' ? 'ÿ•ÿ∫ŸÑÿßŸÇ' : 'Close'}</span></button>
                    </div>
                    <div class="detail-sections">
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-info-circle"></i> <span data-ar="ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿ∑Ÿàÿ±" data-en="Evolution Information">${currentLanguage === 'ar' ? 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ÿ∑Ÿàÿ±' : 'Evolution Information'}</span></h3>
                            <div class="evolution-info ${evolution.type.toLowerCase()}">
                                <strong>${evolution.title}:</strong> ${evolution.summary}
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-shield-alt"></i> <span data-ar="ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©" data-en="Basic Statistics">${currentLanguage === 'ar' ? 'ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©' : 'Basic Statistics'}</span></h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ÿßŸÑÿµÿ≠ÿ©:" data-en="Health:">${currentLanguage === 'ar' ? 'ÿßŸÑÿµÿ≠ÿ©:' : 'Health:'}</span>
                                    <span class="detail-attribute-value">${newHealth} ${evolution.healthChange !== 0 ? `(${evolution.healthChange > 0 ? '+' : ''}${evolution.healthChange})` : ''}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ©:" data-en="Move Speed:">${currentLanguage === 'ar' ? 'ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ©:' : 'Move Speed:'}</span>
                                    <span class="detail-attribute-value">${newSpeed.toFixed(1)} ${evolution.speedChange !== 0 ? `(${evolution.speedChange > 0 ? '+' : ''}${evolution.speedChange.toFixed(1)})` : ''}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ÿßŸÑÿ≥ŸÑŸàŸÉ:" data-en="Behavior:">${currentLanguage === 'ar' ? 'ÿßŸÑÿ≥ŸÑŸàŸÉ:' : 'Behavior:'}</span>
                                    <span class="detail-attribute-value">${evolution.behavior} ${evolution.behavior !== originalPathogen.behavior ? `(${currentLanguage === 'ar' ? 'ŸÖÿ™ÿ∫Ÿäÿ±' : 'changed'})` : ''}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°:" data-en="Hide Efficiency:">${currentLanguage === 'ar' ? 'ŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°:' : 'Hide Efficiency:'}</span>
                                    <span class="detail-attribute-value">${newHideEfficiency.toFixed(1)} ${evolution.hideEfficiencyChange !== 0 ? `(${evolution.hideEfficiencyChange > 0 ? '+' : ''}${evolution.hideEfficiencyChange.toFixed(1)})` : ''}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-dna"></i> <span data-ar="ÿßŸÑÿ™ŸÉÿßÿ´ÿ±" data-en="Reproduction">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÉÿßÿ´ÿ±' : 'Reproduction'}</span></h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:" data-en="Reproduction Period:">${currentLanguage === 'ar' ? 'ŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Period:'}</span>
                                    <span class="detail-attribute-value">${newReproPeriod.toFixed(1)} ${currentLanguage === 'ar' ? 'ÿ´ÿßŸÜŸäÿ©' : 's'} ${evolution.reproPeriodChange !== 0 ? `(${evolution.reproPeriodChange > 0 ? '+' : ''}${evolution.reproPeriodChange.toFixed(1)})` : ''}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ŸÉŸÖŸäÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:" data-en="Reproduction Amount:">${currentLanguage === 'ar' ? 'ŸÉŸÖŸäÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Amount:'}</span>
                                    <span class="detail-attribute-value">${newReproAmount} ${evolution.reproAmountChange !== 0 ? `(${evolution.reproAmountChange > 0 ? '+' : ''}${evolution.reproAmountChange})` : ''}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ÿ£ÿØŸÜŸâ ÿµÿ≠ÿ© ŸÑŸÑÿ™ŸÉÿßÿ´ÿ±:" data-en="Min Health for Reproduction:">${currentLanguage === 'ar' ? 'ÿ£ÿØŸÜŸâ ÿµÿ≠ÿ© ŸÑŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Min Health for Reproduction:'}</span>
                                    <span class="detail-attribute-value">${originalPathogen.minHealthForReproduction}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label" data-ar="ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:" data-en="Reproduction Requirements:">${currentLanguage === 'ar' ? 'ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Requirements:'}</span>
                                    <span class="detail-attribute-value">${newOxygen} O‚ÇÇ / ${newGlucose} G ${evolution.oxygenChange !== 0 || evolution.glucoseChange !== 0 ? `(${evolution.oxygenChange > 0 ? '+' : ''}${evolution.oxygenChange} O‚ÇÇ / ${evolution.glucoseChange > 0 ? '+' : ''}${evolution.glucoseChange} G)` : ''}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-vial"></i> <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©" data-en="Compounds Produced">${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©' : 'Compounds Produced'}</span></h3>
                            <div class="detail-compounds">
                                ${originalPathogen.compoundsProduced && Array.isArray(originalPathogen.compoundsProduced) && originalPathogen.compoundsProduced.length > 0 
                                    ? originalPathogen.compoundsProduced.map(compound => `<span class="detail-compound">${compound}</span>`).join('')
                                    : `<span>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸÜÿ™ÿ¨ÿ©' : 'No compounds produced'}</span>`
                                }
                                ${evolution.newCompounds && Array.isArray(evolution.newCompounds) && evolution.newCompounds.length > 0 
                                    ? evolution.newCompounds.map(compound => `<span class="detail-compound" style="background: rgba(${getEvolutionColor(evolution.type.toLowerCase()).replace('#', '').match(/.{2}/g).map(c => parseInt(c, 16)).join(', ')}, 0.3); color: ${getEvolutionColor(evolution.type.toLowerCase())};">${compound}</span>`).join('')
                                    : ''
                                }
                            </div>
                        </div>
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-shield-virus"></i> <span data-ar="ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß" data-en="Immune To Compounds">${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß' : 'Immune To Compounds'}</span></h3>
                            <div class="detail-immune-compounds">
                                ${originalPathogen.immuneToCompounds && Array.isArray(originalPathogen.immuneToCompounds) && originalPathogen.immuneToCompounds.length > 0 
                                    ? originalPathogen.immuneToCompounds.map(compound => `<span class="detail-immune-compound">${compound}</span>`).join('')
                                    : `<span>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿßÿπÿ© ÿ∂ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™' : 'No immunity to compounds'}</span>`
                                }
                                ${evolution.immuneCompounds && Array.isArray(evolution.immuneCompounds) && evolution.immuneCompounds.length > 0 
                                    ? evolution.immuneCompounds.map(compound => `<span class="detail-immune-compound" style="background: rgba(${getEvolutionColor(evolution.type.toLowerCase()).replace('#', '').match(/.{2}/g).map(c => parseInt(c, 16)).join(', ')}, 0.3); color: ${getEvolutionColor(evolution.type.toLowerCase())};">${compound}</span>`).join('')
                                    : ''
                                }
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('close-detail-btn').addEventListener('click', function() {
                    pathogenDetail.style.display = 'none';
                    pathogenDetail.classList.remove('slide-in');
                    d3.selectAll(".evolution-node").classed("active", false);
                });
                setTimeout(() => {
                    enhancePathogenDetailValues();
                }, 100);

                // ÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿ£ÿπŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ©
                pathogenDetail.scrollIntoView({ behavior: 'smooth' });
            }

            // ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸÖÿ±ÿ∂
            function showPathogenDetail(pathogen) {
                pathogenDetail.style.display = 'block';
                pathogenDetail.classList.add('slide-in');
                
                const icon = getPathogenIcon(pathogen.category);
                
                pathogenDetail.innerHTML = `
                    <div class="detail-header">
                        <div class="detail-icon">${icon}</div>
                        <div class="detail-info">
                            <div class="detail-name">${pathogen.displayName}</div>
                            <div class="detail-category">${getPathogenCategoryName(pathogen.category)}</div>
                        </div>
                        <button class="btn btn-danger" id="close-detail-btn"><i class="fas fa-times"></i> ${currentLanguage === 'ar' ? 'ÿ•ÿ∫ŸÑÿßŸÇ' : 'Close'}</button>
                    </div>
                    <div class="detail-sections">
                        <div class="detail-section">
                            <h3><i class="fas fa-shield-alt"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©' : 'Basic Statistics'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿµÿ≠ÿ©:' : 'Health:'}</span>
                                    <span class="detail-attribute-value">${pathogen.health}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ©:' : 'Move Speed:'}</span>
                                    <span class="detail-attribute-value">${pathogen.moveSpeed}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸäŸÖŸÉŸÜ ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°:' : 'Can Hide:'}</span>
                                    <span class="detail-attribute-value">${pathogen.canHide ? (currentLanguage === 'ar' ? 'ŸÜÿπŸÖ' : 'Yes') : (currentLanguage === 'ar' ? 'ŸÑÿß' : 'No')}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°:' : 'Hide Efficiency:'}</span>
                                    <span class="detail-attribute-value">${pathogen.hideEfficiency || '0'}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-dna"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ŸÉÿßÿ´ÿ±' : 'Reproduction'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÅÿ™ÿ±ÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Period:'}</span>
                                    <span class="detail-attribute-value">${pathogen.reproPeriod} ${currentLanguage === 'ar' ? 'ÿ´ÿßŸÜŸäÿ©' : 'seconds'}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÉŸÖŸäÿ© ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Amount:'}</span>
                                    <span class="detail-attribute-value">${pathogen.reproAmount}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿ£ÿØŸÜŸâ ÿµÿ≠ÿ© ŸÑŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Min Health for Reproduction:'}</span>
                                    <span class="detail-attribute-value">${pathogen.minHealthForReproduction}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±:' : 'Reproduction Requirements:'}</span>
                                    <span class="detail-attribute-value">${pathogen.requiredOxygen} O‚ÇÇ / ${pathogen.requiredGlucose} G</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-user-secret"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑÿ≥ŸÑŸàŸÉ' : 'Behavior'}</h3>
                            <div class="detail-attributes">
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ≥ŸÑŸàŸÉ:' : 'Behavior:'}</span>
                                    <span class="detail-attribute-value">${pathogen.behavior || (currentLanguage === 'ar' ? 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ' : 'Not specified')}</span>
                                </div>
                                <div class="detail-attribute">
                                    <span class="detail-attribute-label">${currentLanguage === 'ar' ? 'ÿ™Ÿàÿßÿ™ÿ± ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°:' : 'Auto Hide Frequency:'}</span>
                                    <span class="detail-attribute-value">${pathogen.autoHideFrequency || '0'}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-vial"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©' : 'Compounds Produced'}</h3>
                            <div class="detail-compounds">
                                ${pathogen.compoundsProduced && Array.isArray(pathogen.compoundsProduced) && pathogen.compoundsProduced.length > 0 
                                    ? pathogen.compoundsProduced.map(compound => `<span class="detail-compound">${compound}</span>`).join('')
                                    : `<span>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸÜÿ™ÿ¨ÿ©' : 'No compounds produced'}</span>`
                                }
                            </div>
                        </div>
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-shield-virus"></i> ${currentLanguage === 'ar' ? 'ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸáÿß ŸÖŸÜÿßÿπÿ© ÿ∂ÿØŸáÿß' : 'Immune To Compounds'}</h3>
                            <div class="detail-immune-compounds">
                                ${pathogen.immuneToCompounds && Array.isArray(pathogen.immuneToCompounds) && pathogen.immuneToCompounds.length > 0 
                                    ? pathogen.immuneToCompounds.map(compound => `<span class="detail-immune-compound">${compound}</span>`).join('')
                                    : `<span>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿßÿπÿ© ÿ∂ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™' : 'No immunity to compounds'}</span>`
                                }
                            </div>
                        </div>
                        ${pathogen.evolutions ? `
                        <div class="detail-section full-width">
                            <h3><i class="fas fa-sitemap"></i> ${currentLanguage === 'ar' ? 'ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©' : 'Available Evolution Types'}</h3>
                            ${Object.values(pathogen.evolutions).map(evolution => `
                                <div class="evolution-summary ${evolution.type.toLowerCase()}">
                                    <strong>${evolution.type}:</strong> ${evolution.summary}
                                </div>
                            `).join('')}
                        </div>
                        ` : ''}
                    </div>
                `;
                
                document.getElementById('close-detail-btn').addEventListener('click', function() {
                    pathogenDetail.style.display = 'none';
                    pathogenDetail.classList.remove('slide-in');
                    d3.selectAll(".evolution-node").classed("active", false);
                });
                
                // ÿ™ŸÖÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿ£ÿπŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ©
                pathogenDetail.scrollIntoView({ behavior: 'smooth' });
            }

            // Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
            async function verifyCompound(compound) {
                try {
                    console.log(`üîç ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ: ${compound.displayName}`);
                    
                    // ÿßŸÑÿÆÿ∑Ÿàÿ© 1: ÿßŸÑÿ®ÿ≠ÿ´ ÿ£ŸàŸÑÿßŸã ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ÿßŸÑŸÖÿπÿ≤ÿ≤ÿ©
                    const localInfo = getCompoundScientificInfo(compound.displayName);
                    if (localInfo.found) {
                        console.log(`‚úÖ ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${compound.displayName} ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©`);
                        return { 
                            compound, 
                            verified: true, 
                            cid: localInfo.pubchemCID,
                            source: 'local_database',
                            scientificInfo: localInfo,
                            searchMethod: localInfo.searchMethod
                        };
                    }

                    // ÿßŸÑÿÆÿ∑Ÿàÿ© 2: ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸàÿ¨ÿØ ŸÖÿ≠ŸÑŸäÿßŸãÿå ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä PubChem API
                    console.log(`üåê ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä PubChem ÿπŸÜ: ${compound.displayName}`);
                    const searchUrl = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/${encodeURIComponent(compound.displayName)}/cids/JSON`;
                    
                    const searchResponse = await fetch(searchUrl);
                    
                    if (!searchResponse.ok) {
                        console.log(`‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ® PubChem ŸÑŸÄ: ${compound.displayName}`);
                        
                        // ÿßŸÑÿÆÿ∑Ÿàÿ© 3: ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ© ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
                        const alternativeResult = await searchAlternativeNames(compound.displayName);
                        if (alternativeResult.found) {
                            return { 
                                compound, 
                                verified: true, 
                                cid: alternativeResult.pubchemCID,
                                source: 'alternative_name_search',
                                scientificInfo: alternativeResult,
                                searchMethod: alternativeResult.searchMethod
                            };
                        }
                        
                        return { 
                            compound, 
                            verified: false, 
                            error: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ® PubChem',
                            source: 'pubchem_failed'
                        };
                    }
                    
                    const searchData = await searchResponse.json();
                    
                    if (!searchData.IdentifierList || !searchData.IdentifierList.CID || searchData.IdentifierList.CID.length === 0) {
                        console.log(`‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${compound.displayName} ŸÅŸä PubChem`);
                        
                        // ÿßŸÑÿÆÿ∑Ÿàÿ© 4: ÿßŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ©
                        const alternativeResult = await searchAlternativeNames(compound.displayName);
                        if (alternativeResult.found) {
                            return { 
                                compound, 
                                verified: true, 
                                cid: alternativeResult.pubchemCID,
                                source: 'alternative_name_fallback',
                                scientificInfo: alternativeResult,
                                searchMethod: alternativeResult.searchMethod
                            };
                        }
                        
                        return { 
                            compound, 
                            verified: false, 
                            error: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ® ŸÅŸä PubChem',
                            source: 'pubchem_not_found'
                        };
                    }
                    
                    console.log(`‚úÖ ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${compound.displayName} ŸÅŸä PubChem - CID: ${searchData.IdentifierList.CID[0]}`);
                    
                    // ÿßŸÑÿÆÿ∑Ÿàÿ© 5: ÿ¨ŸÑÿ® ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ© ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ CID
                    const cid = searchData.IdentifierList.CID[0];
                    const scientificInfo = getCompoundScientificInfoByCID(cid) || await getPubChemCompoundDetails(cid);
                    
                    return { 
                        compound, 
                        verified: true, 
                        cid: cid,
                        source: 'pubchem',
                        scientificInfo: scientificInfo
                    };
                    
                } catch (error) {
                    console.error(`üí• ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ${compound.displayName}:`, error);
                    
                    // ÿßŸÑÿÆÿ∑Ÿàÿ© 6: ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸÉÿ®ÿØŸäŸÑ ÿ£ÿÆŸäÿ±
                    const localFallback = getCompoundScientificInfo(compound.displayName);
                    if (localFallback.found) {
                        return { 
                            compound, 
                            verified: true, 
                            cid: localFallback.pubchemCID,
                            source: 'local_fallback',
                            scientificInfo: localFallback,
                            searchMethod: localFallback.searchMethod
                        };
                    }
                    
                    return { 
                        compound, 
                        verified: false, 
                        error: error.message,
                        source: 'error'
                    };
                }
            }

    // ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÑŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ CID
            function getCompoundScientificInfoByCID(cid) {
                for (const [name, info] of Object.entries(chemicalCompoundsDB)) {
                    if (info.pubchemCID === cid.toString()) {
                        return { ...info, found: true, searchMethod: 'cid_match' };
                    }
                }
                return { found: false };
            }



            // ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÑŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ©
            async function searchAlternativeNames(compoundName) {
                const normalizedName = compoundName.toLowerCase().trim();
                
                // ŸÇÿßÿ¶ŸÖÿ© ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ®ÿØŸäŸÑÿ© ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ©
                const alternativeSearches = [
                    normalizedName,
                    normalizedName.replace(/[^a-z0-9]/g, ' ').trim(),
                    normalizedName.replace(/\s+/g, ' '),
                    // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ£ÿ¥ŸÉÿßŸÑ ÿßŸÑÿ®ÿØŸäŸÑÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ≠ÿßÿ¨ÿ©
                ];
                
                for (const searchTerm of alternativeSearches) {
                    if (searchTerm && searchTerm.length > 2) {
                        const localInfo = getCompoundScientificInfo(searchTerm);
                        if (localInfo.found) {
                            return {
                                ...localInfo,
                                found: true,
                                searchMethod: 'alternative_name_match'
                            };
                        }
                    }
                }
                
                return { found: false };
            }


            // Ÿàÿ∏ŸäŸÅÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™
            async function verifyAllCompounds() {
                if (isVerifying) return;
                
                isVerifying = true;
                checkingStatus.style.display = 'flex';
                verifyAllCompoundsBtn.disabled = true;
                
                // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÇŸàÿßÿ¶ŸÖ
                verifiedCompounds = [];
                unverifiedCompounds = [];
                verifiedCompoundsGrid.innerHTML = '';
                unverifiedCompoundsGrid.innerHTML = '';
                
                // ÿπÿ±ÿ∂ ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ
                const progressOverlay = document.createElement('div');
                progressOverlay.className = 'loading-overlay';
                progressOverlay.innerHTML = `
                    <div class="spinner"></div>
                    <p>${currentLanguage === 'ar' ? 'ÿ¨ÿßÿ±Ÿä ŸÅÿ≠ÿµ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™...' : 'Checking compounds...'}</p>
                    <div class="verification-progress">
                        <div class="progress-bar" id="verification-progress-bar"></div>
                    </div>
                `;
                document.getElementById('auto-verification-section').appendChild(progressOverlay);
                
                const progressBar = document.getElementById('verification-progress-bar');
                
                // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑ ŸÖÿ±ŸÉÿ®
                for (let i = 0; i < compoundsData.length; i++) {
                    const compound = compoundsData[i];
                    const result = await verifyCompound(compound);
                    
                    if (result.verified) {
                        verifiedCompounds.push(result);
                    } else {
                        unverifiedCompounds.push(result);
                    }
                    
                    // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ŸÇÿØŸÖ
                    const progress = ((i + 1) / compoundsData.length) * 100;
                    progressBar.style.width = `${progress}%`;
                    
                    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØÿßÿØ
                    updateCounters();
                    
                    // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ¨ÿ≤ÿ¶Ÿäÿ©
                    if (result.verified) {
                        displayVerifiedCompound(result);
                    } else {
                        displayUnverifiedCompound(result);
                    }
                }
                
                // ÿ•ÿÆŸÅÿßÿ° ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸÇÿØŸÖ
                progressOverlay.remove();
                checkingStatus.style.display = 'none';
                verifyAllCompoundsBtn.disabled = false;
                isVerifying = false;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖÿπÿ≤ÿ≤ÿ©
                updateDocumentationCards();
                
                // ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°
                showAlert(
                    currentLanguage === 'ar' 
                        ? `ÿ™ŸÖ ŸÅÿ≠ÿµ ${compoundsData.length} ŸÖÿ±ŸÉÿ®: ${verifiedCompounds.length} ŸÖŸàÿ´ŸàŸÇ Ÿà ${unverifiedCompounds.length} ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸàŸÇ` 
                        : `Checked ${compoundsData.length} compounds: ${verifiedCompounds.length} verified and ${unverifiedCompounds.length} unverified`,
                    'success'
                );
            }
            
            // Ÿàÿ∏ŸäŸÅÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØÿßÿØÿßÿ™
            function updateCounters() {
                verifiedCount.textContent = verifiedCompounds.length;
                unverifiedCount.textContent = unverifiedCompounds.length;
            }
            
            // Ÿàÿ∏ŸäŸÅÿ© ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ® ÿßŸÑŸÖŸàÿ´ŸàŸÇ
      // ÿ™ÿ≠ÿ≥ŸäŸÜ ÿØÿßŸÑÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ©
            function displayVerifiedCompound(result) {
                const card = document.createElement('div');
                card.className = 'verified-compound-card interactive-element';
                
                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ© ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖÿ™ÿßÿ≠ÿ©
                const scientificInfo = result.scientificInfo || getCompoundScientificInfo(result.compound.displayName);
                
                card.innerHTML = `
                    <div class="verification-badge verified-badge">
                        <i class="fas fa-check-circle"></i> 
                        ${currentLanguage === 'ar' ? 'ŸÖŸàÿ´ŸàŸÇ' : 'Verified'}
                        ${result.source ? ` (${result.source})` : ''}
                    </div>
                    <div class="compound-verification-header">
                        <div class="verification-icon verified-icon">
                            <i class="fas fa-flask"></i>
                        </div>
                        <div>
                            <div class="compound-name">${result.compound.displayName}</div>
                            <div class="compound-category">${getCategoryName(result.compound.category)}</div>
                            ${scientificInfo && scientificInfo.formula ? 
                                `<div class="chemical-formula-small">${scientificInfo.formula}</div>` : ''}
                        </div>
                    </div>
                    <div class="compound-verification-details">
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ÿµŸÜŸäŸÅ:' : 'Category:'}</span>
                            <span class="property-value">${getCategoryName(result.compound.category)}</span>
                        </div>
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±:' : 'Effect Type:'}</span>
                            <span class="property-value">${getEffectTypeName(result.compound.effectType)}</span>
                        </div>
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ŸÖÿµÿØÿ± ÿßŸÑÿ™ÿ≠ŸÇŸÇ:' : 'Verification Source:'}</span>
                            <span class="property-value">${getVerificationSourceName(result.source)}</span>
                        </div>
                        ${result.cid ? `
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ŸÖÿπÿ±ŸÅ PubChem:' : 'PubChem ID:'}</span>
                            <span class="property-value">${result.cid}</span>
                        </div>
                        ` : ''}
                    </div>
                `;
                
                card.addEventListener('click', function() {
                    selectedCompoundId = result.compound.id;
                    showCompoundDetail(result.compound);
                });
                
                verifiedCompoundsGrid.appendChild(card);
            }

            // ÿØÿßŸÑÿ© ŸÖÿ≥ÿßÿπÿØÿ© ŸÑÿ™ÿ±ÿ¨ŸÖÿ© ŸÖÿµÿØÿ± ÿßŸÑÿ™ÿ≠ŸÇŸÇ
            function getVerificationSourceName(source) {
                const sources = {
                    'local_database': currentLanguage === 'ar' ? 'ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ŸÑŸäÿ©' : 'Local Database',
                    'pubchem': 'PubChem',
                    'local_fallback': currentLanguage === 'ar' ? 'ÿ®ÿØŸäŸÑ ŸÖÿ≠ŸÑŸä' : 'Local Fallback',
                    'pubchem_failed': currentLanguage === 'ar' ? 'PubChem (ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ)' : 'PubChem (Connection Failed)',
                    'pubchem_not_found': currentLanguage === 'ar' ? 'PubChem (ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ)' : 'PubChem (Not Found)',
                    'error': currentLanguage === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error'
                };
                return sources[source] || source;
            }
            
            // Ÿàÿ∏ŸäŸÅÿ© ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ŸÉÿ® ÿ∫Ÿäÿ± ÿßŸÑŸÖŸàÿ´ŸàŸÇ
            function displayUnverifiedCompound(result) {
                const card = document.createElement('div');
                card.className = 'unverified-compound-card interactive-element';
                
                card.innerHTML = `
                    <div class="verification-badge unverified-badge">
                        <i class="fas fa-exclamation-triangle"></i> 
                        ${currentLanguage === 'ar' ? 'ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸàŸÇ' : 'Unverified'}
                    </div>
                    <div class="compound-verification-header">
                        <div class="verification-icon unverified-icon">
                            <i class="fas fa-vial"></i>
                        </div>
                        <div>
                            <div class="compound-name">${result.compound.displayName}</div>
                            <div class="compound-category">${getCategoryName(result.compound.category)}</div>
                        </div>
                    </div>
                    <div class="compound-verification-details">
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ÿµŸÜŸäŸÅ:' : 'Category:'}</span>
                            <span class="property-value">${getCategoryName(result.compound.category)}</span>
                        </div>
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±:' : 'Effect Type:'}</span>
                            <span class="property-value">${getEffectTypeName(result.compound.effectType)}</span>
                        </div>
                        <div class="verification-property">
                            <span class="property-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ≠ÿßŸÑÿ©:' : 'Status:'}</span>
                            <span class="property-value">${currentLanguage === 'ar' ? 'ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä PubChem' : 'Not found in PubChem'}</span>
                        </div>
                    </div>
                `;
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ÿØÿ´ ÿßŸÑŸÜŸÇÿ± ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ
                card.addEventListener('click', function() {
                    selectedCompoundId = result.compound.id;
                    showCompoundDetail(result.compound);
                });
                
                unverifiedCompoundsGrid.appendChild(card);
            }
            
            // Ÿàÿ∏ŸäŸÅÿ© ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿπÿØŸÖ Ÿàÿ¨ŸàÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™
            function displayNoCompoundsMessage() {
                if (verifiedCompounds.length === 0) {
                    verifiedCompoundsGrid.innerHTML = `
                        <div class="no-compounds-message full-width">
                            <i class="fas fa-info-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <p>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸàÿ´ŸàŸÇÿ© ÿ®ÿπÿØ. ÿßŸÜŸÇÿ± ÿπŸÑŸâ "ŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™" ŸÑÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ.' : 'No verified compounds yet. Click "Check All Compounds" to start verification.'}</p>
                        </div>
                    `;
                }
                
                if (unverifiedCompounds.length === 0) {
                    unverifiedCompoundsGrid.innerHTML = `
                        <div class="no-compounds-message full-width">
                            <i class="fas fa-info-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <p>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸàŸÇÿ© ÿ®ÿπÿØ. ÿßŸÜŸÇÿ± ÿπŸÑŸâ "ŸÅÿ≠ÿµ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™" ŸÑÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ.' : 'No unverified compounds yet. Click "Check All Compounds" to start verification.'}</p>
                        </div>
                    `;
                }
            }

            // ÿØÿßŸÑÿ© ŸÑÿ¨ŸÑÿ® ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖŸÅÿµŸÑÿ© ŸÖŸÜ PubChem ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ CID
            async function getPubChemCompoundDetails(cid) {
                try {
                    const detailsUrl = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${cid}/JSON`;
                    const response = await fetch(detailsUrl);
                    
                    if (!response.ok) {
                        throw new Error('ŸÅÿ¥ŸÑ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ');
                    }
                    
                    const data = await response.json();
                    const compound = data.PC_Compounds[0];
                    
                    // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©
                    const info = {
                        cid: cid,
                        iupacName: '',
                        molecularFormula: '',
                        molecularWeight: '',
                        description: '',
                        commonNames: []
                    };
                    
                    // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿÆÿµÿßÿ¶ÿµ ÿßŸÑŸÖÿ±ŸÉÿ®
                    if (compound.props) {
                        compound.props.forEach(prop => {
                            const label = prop.urn?.label;
                            const value = prop.value;
                            
                            switch(label) {
                                case 'IUPAC Name':
                                    info.iupacName = value.sval || '';
                                    break;
                                case 'Molecular Formula':
                                    info.molecularFormula = value.sval || '';
                                    break;
                                case 'Molecular Weight':
                                    info.molecularWeight = value.fval ? value.fval.toFixed(2) + ' g/mol' : '';
                                    break;
                                case 'Compound Complexity':
                                    info.complexity = value.fval ? value.fval.toFixed(2) : '';
                                    break;
                            }
                        });
                    }
                    
                    // ÿ¨ŸÑÿ® ÿßŸÑŸàÿµŸÅ ŸÖŸÜ ŸÖÿµÿØÿ± ÿ¢ÿÆÿ± (ŸÇÿØ Ÿäÿ≠ÿ™ÿßÿ¨ ŸÑÿ™ÿπÿØŸäŸÑ)
                    try {
                        const descriptionUrl = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${cid}/description/JSON`;
                        const descResponse = await fetch(descriptionUrl);
                        if (descResponse.ok) {
                            const descData = await descResponse.json();
                            if (descData.InformationList?.Information?.[0]?.Description) {
                                info.description = descData.InformationList.Information[0].Description;
                            }
                        }
                    } catch (descError) {
                        console.log('ŸÑÿß ŸäŸàÿ¨ÿØ ŸàÿµŸÅ ŸÖÿ™ÿßÿ≠');
                    }
                    
                    return info;
                } catch (error) {
                    console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ:', error);
                    return null;
                }
            }

            // ÿØÿßŸÑÿ© ŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿ∑ÿßŸÇÿ© ÿ™Ÿàÿ´ŸäŸÇ ŸÖÿ≠ÿ≥ŸÜÿ©
            function createEnhancedDocumentationCard(compound, pubchemInfo) {
                const card = document.createElement('div');
                card.className = 'enhanced-compound-card interactive-element';
                
                // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©
                const localInfo = getCompoundScientificInfo(compound.displayName);
                
                const icon = getCompoundIcon(compound.category);
                const formula = pubchemInfo?.molecularFormula || localInfo.formula || 'ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ';
                const description = pubchemInfo?.description || 
                                (localInfo.description ? localInfo.description[currentLanguage] || localInfo.description.en : 'ŸÑÿß ŸäŸàÿ¨ÿØ ŸàÿµŸÅ ŸÖÿ™ÿßÿ≠');
                const molecularWeight = pubchemInfo?.molecularWeight || 
                                    (localInfo.molecularWeight ? localInfo.molecularWeight + ' g/mol' : 'ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ');
                
                card.innerHTML = `
                    <div class="verified-badge-large">
                        <i class="fas fa-check-circle"></i> 
                        ${currentLanguage === 'ar' ? 'ŸÖŸàÿ´ŸàŸÇ ÿπŸÑŸÖŸäÿßŸã' : 'Scientifically Verified'}
                    </div>
                    
                    <div class="enhanced-compound-header">
                        <div class="enhanced-compound-icon">${icon}</div>
                        <div>
                            <div class="enhanced-compound-name">${compound.displayName}</div>
                            <div class="enhanced-compound-category">${getCategoryName(compound.category)}</div>
                        </div>
                    </div>
                    
                    <div class="molecular-structure">
                        <div class="structure-title">${currentLanguage === 'ar' ? 'ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä' : 'Chemical Symbol'}</div>
                        <div class="chemical-formula">${formula}</div>
                    </div>
                    
                    <div class="enhanced-compound-details">
                        <div class="enhanced-property">
                            <span class="enhanced-property-label">${currentLanguage === 'ar' ? 'ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ¨ÿ≤Ÿäÿ¶Ÿä:' : 'Molecular Weight:'}</span>
                            <span class="enhanced-property-value">${molecularWeight}</span>
                        </div>
                        
                        <div class="enhanced-property">
                            <span class="enhanced-property-label">${currentLanguage === 'ar' ? 'ŸÖÿπÿ±ŸÅ PubChem:' : 'PubChem ID:'}</span>
                            <span class="enhanced-property-value">${pubchemInfo?.cid || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±'}</span>
                        </div>
                        
                        <div class="enhanced-property">
                            <span class="enhanced-property-label">${currentLanguage === 'ar' ? 'ŸÜŸàÿπ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±:' : 'Effect Type:'}</span>
                            <span class="enhanced-property-value">${getEffectTypeName(compound.effectType)}</span>
                        </div>
                        
                        <div class="enhanced-property">
                            <span class="enhanced-property-label">${currentLanguage === 'ar' ? 'ÿßŸÑÿ™ÿµŸÜŸäŸÅ:' : 'Category:'}</span>
                            <span class="enhanced-property-value">${getCategoryName(compound.category)}</span>
                        </div>
                    </div>
                    
                    <div class="compound-description">
                        <strong>${currentLanguage === 'ar' ? 'ÿßŸÑŸàÿµŸÅ ÿßŸÑÿπŸÑŸÖŸä:' : 'Scientific Description:'}</strong><br>
                        ${description}
                    </div>
                    
                    ${localInfo.commonNames && localInfo.commonNames.length > 0 ? `
                        <div class="common-names">
                            <strong>${currentLanguage === 'ar' ? 'ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©:' : 'Common Names:'}</strong>
                            ${localInfo.commonNames.map(name => `<span class="common-name">${name}</span>`).join('')}
                        </div>
                    ` : ''}
                    
                    ${pubchemInfo?.cid ? `
                        <a href="https://pubchem.ncbi.nlm.nih.gov/compound/${pubchemInfo.cid}" 
                        target="_blank" class="pubchem-link">
                            <i class="fas fa-external-link-alt"></i> 
                            ${currentLanguage === 'ar' ? 'ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÅŸä PubChem' : 'View More in PubChem'}
                        </a>
                    ` : ''}
                `;
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑŸÜŸÇÿ± ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ
                card.addEventListener('click', function() {
                    selectedCompoundId = compound.id;
                    showCompoundDetail(compound);
                });
                
                return card;
            }

            // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã
            async function updateDocumentationCards() {
                documentationGrid.innerHTML = `
                    <div class="loading-overlay" style="position: relative; height: 200px;">
                        <div class="spinner"></div>
                        <p>${currentLanguage === 'ar' ? 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ...' : 'Loading documentation cards...'}</p>
                    </div>
                `;
                
                // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ© ÿ£Ÿà ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©
                const compoundsToDocument = verifiedCompounds.length > 0 ? 
                    verifiedCompounds : 
                    await getVerifiedCompoundsFromDatabase();
                
                if (compoundsToDocument.length === 0) {
                    documentationGrid.innerHTML = `
                        <div class="no-compounds-message full-width">
                            <i class="fas fa-info-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <p>${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ±ŸÉÿ®ÿßÿ™ ŸÖŸàÿ´ŸàŸÇÿ© ŸÑÿπÿ±ÿ∂Ÿáÿß. ŸÇŸÖ ÿ®ŸÅÿ≠ÿµ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ£ŸàŸÑÿßŸã.' : 'No verified compounds to display. Please check compounds first.'}</p>
                        </div>
                    `;
                    return;
                }
                
                documentationGrid.innerHTML = '';
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿ®ÿ∑ÿßŸÇÿßÿ™ ŸÑŸÉŸÑ ŸÖÿ±ŸÉÿ® ŸÖŸàÿ´ŸàŸÇ
                for (const result of compoundsToDocument.slice(0, 12)) { // ÿπÿ±ÿ∂ ÿ£ŸàŸÑ 12 ŸÖÿ±ŸÉÿ® ŸÅŸÇÿ∑
                    const compound = result.compound || result;
                    let pubchemInfo = null;
                    
                    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ CIDÿå ÿ¨ŸÑÿ® ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸÖŸÜ PubChem
                    if (result.cid) {
                        pubchemInfo = await getPubChemCompoundDetails(result.cid);
                    } else {
                        // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ CID ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸÖŸàÿ¨ŸàÿØÿßŸã
                        const searchResult = await verifyCompound(compound);
                        if (searchResult.verified && searchResult.cid) {
                            pubchemInfo = await getPubChemCompoundDetails(searchResult.cid);
                        }
                    }
                    
                    const card = createEnhancedDocumentationCard(compound, pubchemInfo);
                    documentationGrid.appendChild(card);
                }
            }

            // ÿØÿßŸÑÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
            async function getVerifiedCompoundsFromDatabase() {
                const verified = [];
                
                for (const compound of compoundsData) {
                    const scientificInfo = getCompoundScientificInfo(compound.displayName);
                    if (scientificInfo.found) {
                        verified.push({
                            compound: compound,
                            verified: true,
                            cid: scientificInfo.pubchemCID
                        });
                    }
                }
                
                return verified;
            }

            // Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
            function getCategoryName(category) {
                const categories = {
                    'Antimicrobial': currentLanguage === 'ar' ? 'ŸÖÿ∂ÿßÿØ ŸÖŸäŸÉÿ±Ÿàÿ®Ÿä' : 'Antimicrobial',
                    'Toxin': currentLanguage === 'ar' ? 'ÿ≥ŸÖ' : 'Toxin',
                    'Immunomodulator': currentLanguage === 'ar' ? 'ŸÖŸÜÿ∏ŸÖ ŸÖŸÜÿßÿπŸä' : 'Immunomodulator',
                    'Antibody': currentLanguage === 'ar' ? 'ÿ¨ÿ≥ŸÖ ŸÖÿ∂ÿßÿØ' : 'Antibody',
                    'Nutrient': currentLanguage === 'ar' ? 'ŸÖÿ∫ÿ∞Ÿä' : 'Nutrient',
                    'Neutral': currentLanguage === 'ar' ? 'ŸÖÿ≠ÿßŸäÿØ' : 'Neutral'
                };
                return categories[category] || category;
            }

            function getEffectTypeName(effectType) {
                const effects = {
                    'InhibitReproduction': currentLanguage === 'ar' ? 'ÿ™ÿ´ÿ®Ÿäÿ∑ ÿßŸÑÿ™ŸÉÿßÿ´ÿ±' : 'Inhibit Reproduction',
                    'SlowMovement': currentLanguage === 'ar' ? 'ÿ•ÿ®ÿ∑ÿßÿ° ÿßŸÑÿ≠ÿ±ŸÉÿ©' : 'Slow Movement',
                    'DamageOverTime': currentLanguage === 'ar' ? 'ÿ∂ÿ±ÿ± ŸÖÿ≥ÿ™ŸÖÿ±' : 'Damage Over Time',
                    'ReduceDefense': currentLanguage === 'ar' ? 'ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿØŸÅÿßÿπ' : 'Reduce Defense',
                    'BoostDefense': currentLanguage === 'ar' ? 'ÿ™ÿπÿ≤Ÿäÿ≤ ÿßŸÑÿØŸÅÿßÿπ' : 'Boost Defense',
                    'BindAntigen': currentLanguage === 'ar' ? 'ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ≥ÿ™ÿ∂ÿØ' : 'Bind Antigen',
                    'InflammationChange': currentLanguage === 'ar' ? 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿßŸÑÿ™Ÿáÿßÿ®' : 'Inflammation Change',
                    'SignalChemotaxis': currentLanguage === 'ar' ? 'ÿ•ÿ¥ÿßÿ±ÿ© ŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ©' : 'Signal Chemotaxis'
                };
                return effects[effectType] || effectType;
            }

            function getCarrierName(carrier) {
                const carriers = {
                    'ImmuneCell': currentLanguage === 'ar' ? 'ÿÆŸÑŸäÿ© ŸÖŸÜÿßÿπŸäÿ©' : 'Immune Cell',
                    'Pathogen': currentLanguage === 'ar' ? 'ŸÖŸÖÿ±ÿ∂' : 'Pathogen',
                    'Environment': currentLanguage === 'ar' ? 'ÿ®Ÿäÿ¶ÿ©' : 'Environment'
                };
                return carriers[carrier] || carrier;
            }

            function getPathogenCategoryName(category) {
                const categories = {
                    'Bacteria': currentLanguage === 'ar' ? 'ÿ®ŸÉÿ™Ÿäÿ±Ÿäÿß' : 'Bacteria',
                    'Virus': currentLanguage === 'ar' ? 'ŸÅŸäÿ±Ÿàÿ≥' : 'Virus',
                    'Fungus': currentLanguage === 'ar' ? 'ŸÅÿ∑ÿ±Ÿäÿßÿ™' : 'Fungus',
                    'Parasite': currentLanguage === 'ar' ? 'ÿ∑ŸÅŸäŸÑŸä' : 'Parasite'
                };
                return categories[category] || category;
            }

            function getPathogenIcon(category) {
                const icons = {
                    'Bacteria': 'ü¶†',
                    'Virus': 'ü¶†',
                    'Fungus': 'üçÑ',
                    'Parasite': 'üêõ'
                };
                return icons[category] || 'ü¶†';
            }

            function getCompoundIcon(category) {
                const icons = {
                    'Antimicrobial': 'üß™',
                    'Toxin': '‚ò£Ô∏è',
                    'Immunomodulator': 'üõ°Ô∏è',
                    'Antibody': 'üî¨',
                    'Nutrient': 'üçé',
                    'Neutral': '‚öóÔ∏è'
                };
                return icons[category] || 'üß™';
            }

            function getEvolutionColor(type) {
                const colors = {
                    'a': '#4caf50',
                    'b': '#2196f3',
                    'c': '#ff9800',
                    'd': '#f44336'
                };
                return colors[type] || '#9e0000';
            }

            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™
            function showAlert(message, type) {
                const alert = document.createElement('div');
                alert.className = `alert alert-${type} slide-in`;
                alert.textContent = message;
                document.body.insertBefore(alert, document.body.firstChild);
                setTimeout(() => {
                    alert.remove();
                }, 5000);
            }

            // ÿ•ÿ∏Ÿáÿßÿ± ŸÜÿßŸÅÿ∞ÿ© ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±
            function showPasswordModal() {
                passwordInput.value = '';
                passwordModal.style.display = 'flex';
            }

            // ÿ•ÿÆŸÅÿßÿ° ŸÜÿßŸÅÿ∞ÿ© ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±
            function hidePasswordModal() {
                passwordModal.style.display = 'none';
                pendingDeleteAction = null;
            }

            // ŸÖÿ≠ÿßŸÉÿßÿ© ÿ≥ŸÑŸàŸÉ ÿßŸÑÿÆŸÑÿßŸäÿß ÿßŸÑÿπÿ¥Ÿàÿßÿ¶Ÿä
            let behaviorInterval;
            let isRunning = false;
            
            const behaviors = [
                {
                    name: { ar: 'ÿπÿØŸàÿßŸÜŸä', en: 'Aggressive' },
                    color: 'rgba(244, 67, 54, 0.7)',
                    border: 'var(--accent-danger)',
                    icon: 'fa-fist-raised',
                    description: { ar: 'ÿßŸÑÿÆŸÑŸäÿ© ÿ™Ÿáÿßÿ¨ŸÖ ÿßŸÑÿÆŸÑÿßŸäÿß ÿßŸÑŸÖÿ¨ÿßŸàÿ±ÿ©', en: 'Cell is attacking nearby cells' }
                },
                {
                    name: { ar: 'ÿ™ÿπÿßŸàŸÜŸä', en: 'Cooperative' },
                    color: 'rgba(76, 175, 80, 0.7)',
                    border: 'var(--accent-success)',
                    icon: 'fa-handshake',
                    description: { ar: 'ÿßŸÑÿÆŸÑŸäÿ© ÿ™ÿ™ÿπÿßŸàŸÜ ŸÖÿπ ÿßŸÑÿÆŸÑÿßŸäÿß ÿßŸÑŸÖÿ¨ÿßŸàÿ±ÿ©', en: 'Cell is cooperating with nearby cells' }
                },
                {
                    name: { ar: 'ÿØŸÅÿßÿπŸä', en: 'Defensive' },
                    color: 'rgba(255, 152, 0, 0.7)',
                    border: 'var(--accent-warning)',
                    icon: 'fa-shield-alt',
                    description: { ar: 'ÿßŸÑÿÆŸÑŸäÿ© ÿ™ÿØÿßŸÅÿπ ÿπŸÜ ŸÜŸÅÿ≥Ÿáÿß', en: 'Cell is defending itself' }
                }
            ];
            
         
            

            // ŸÖŸÇÿßÿ±ŸÜÿ© ÿÆÿ∑Ÿàÿ±ÿ© ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™
            function calculateDangerScore(pathogen) {
                let score = 0;
                
                // ÿßŸÑÿ≥ŸÑŸàŸÉ (ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑÿ£ŸÉÿ®ÿ±)
                if (pathogen.behavior === (currentLanguage === 'ar' ? 'ÿ™ÿπÿßŸàŸÜŸä' : 'Cooperative')) {
                    score += 40;
                } else if (pathogen.behavior === (currentLanguage === 'ar' ? 'ÿØŸÅÿßÿπŸä' : 'Defensive')) {
                    score += 30;
                } else {
                    score += 20;
                }
                
                // ÿßŸÑÿ™ŸÉÿßÿ´ÿ± (Ÿàÿ≤ŸÜ ŸÉÿ®Ÿäÿ±)
                score += pathogen.reproAmount * 4;
                score += (15 - pathogen.reproPeriod) * 1.5;
                
                // ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿäÿ© (Ÿàÿ≤ŸÜ ŸÉÿ®Ÿäÿ±)
                if (pathogen.compoundsProduced) {
                    score += pathogen.compoundsProduced.length * 3;
                }
                
                // ÿßŸÑŸÖŸÜÿßÿπÿ© (Ÿàÿ≤ŸÜ ŸÖÿ™Ÿàÿ≥ÿ∑)
                if (pathogen.immuneToCompounds) {
                    score += pathogen.immuneToCompounds.length * 2;
                }
                
                // ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ° (Ÿàÿ≤ŸÜ ŸÖÿ™Ÿàÿ≥ÿ∑)
                if (pathogen.canHide) {
                    score += 15;
                    score += (pathogen.hideEfficiency || 0) * 2;
                }
                
                // ÿßŸÑÿµÿ≠ÿ© ŸàÿßŸÑÿ≥ÿ±ÿπÿ© (Ÿàÿ≤ŸÜ ŸÇŸÑŸäŸÑ)
                score += pathogen.health * 0.5;
                score += pathogen.moveSpeed * 2;
                
                return Math.round(score);
            }
            
            function updateDangerComparison() {
                if (pathogensData.length === 0) {
                    dangerChart.innerHTML = `<p style="text-align: center; padding: 40px;">${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÖÿ±ÿ∂ÿßÿ™ ŸÑŸÑŸÖŸÇÿßÿ±ŸÜÿ©' : 'No pathogens to compare'}</p>`;
                    dangerRanking.innerHTML = `<p style="text-align: center; padding: 20px;">${currentLanguage === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÖÿ±ÿ∂ÿßÿ™ ŸÑŸÑŸÖŸÇÿßÿ±ŸÜÿ©' : 'No pathogens to compare'}</p>`;
                    return;
                }
                
                const pathogensWithScores = pathogensData.map(pathogen => ({
                    ...pathogen,
                    dangerScore: calculateDangerScore(pathogen)
                })).sort((a, b) => b.dangerScore - a.dangerScore);
                
                displayDangerRanking(pathogensWithScores);
                displayDangerChart(pathogensWithScores.slice(0, 5));
            }
            
            function displayDangerRanking(pathogensWithScores) {
                dangerRanking.innerHTML = '';
                
                pathogensWithScores.forEach((pathogen, index) => {
                    const rankItem = document.createElement('div');
                    rankItem.className = `rank-item ${index < 3 ? 'rank-' + (index + 1) : ''}`;
                    
                    rankItem.innerHTML = `
                        <div class="rank-number">${index + 1}</div>
                        <div class="rank-info">
                            <div class="rank-name">${pathogen.displayName}</div>
                            <div class="rank-score">${currentLanguage === 'ar' ? 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©:' : 'Danger Score:'} ${pathogen.dangerScore}</div>
                            <div class="rank-score">${currentLanguage === 'ar' ? 'ÿßŸÑÿ≥ŸÑŸàŸÉ:' : 'Behavior:'} ${pathogen.behavior}</div>
                        </div>
                        <div class="pathogen-icon">${getPathogenIcon(pathogen.category)}</div>
                    `;
                    
                    dangerRanking.appendChild(rankItem);
                });
            }
            
            function displayDangerChart(topPathogens) {
                dangerChart.innerHTML = '';
                
                const margin = { top: 20, right: 20, bottom: 50, left: 60 };
                const width = dangerChart.clientWidth - margin.left - margin.right;
                const height = dangerChart.clientHeight - margin.top - margin.bottom;
                
                const svg = d3.select("#dangerChart")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", `translate(${margin.left},${margin.top})`);
                
                const data = topPathogens.map(p => ({
                    name: p.displayName,
                    score: p.dangerScore,
                    behavior: p.behavior
                }));
                
                const x = d3.scaleBand()
                    .domain(data.map(d => d.name))
                    .range([0, width])
                    .padding(0.2);
                
                const y = d3.scaleLinear()
                    .domain([0, d3.max(data, d => d.score) * 1.1])
                    .range([height, 0]);
                
                svg.append("g")
                    .attr("transform", `translate(0,${height})`)
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .attr("transform", "rotate(-45)")
                    .style("text-anchor", "end")
                    .style("fill", "var(--text-light)");
                
                svg.append("g")
                    .call(d3.axisLeft(y))
                    .style("color", "var(--text-light)");
                
                svg.selectAll(".bar")
                    .data(data)
                    .enter()
                    .append("rect")
                    .attr("class", "bar")
                    .attr("x", d => x(d.name))
                    .attr("y", d => y(d.score))
                    .attr("width", x.bandwidth())
                    .attr("height", d => height - y(d.score))
                    .attr("fill", d => {
                        if (d.behavior === (currentLanguage === 'ar' ? 'ÿ™ÿπÿßŸàŸÜŸä' : 'Cooperative')) return "var(--accent-success)";
                        if (d.behavior === (currentLanguage === 'ar' ? 'ÿØŸÅÿßÿπŸä' : 'Defensive')) return "var(--accent-warning)";
                        return "var(--accent-danger)";
                    });
                
                svg.selectAll(".label")
                    .data(data)
                    .enter()
                    .append("text")
                    .attr("class", "label")
                    .attr("x", d => x(d.name) + x.bandwidth() / 2)
                    .attr("y", d => y(d.score) - 5)
                    .attr("text-anchor", "middle")
                    .text(d => d.score)
                    .style("fill", "var(--text-light)")
                    .style("font-weight", "bold");
                
                svg.append("text")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 0 - margin.left)
                    .attr("x", 0 - (height / 2))
                    .attr("dy", "1em")
                    .style("text-anchor", "middle")
                    .style("fill", "var(--text-light)")
                    .text(currentLanguage === 'ar' ? "ÿØÿ±ÿ¨ÿ© ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©" : "Danger Score");
            }

            // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ŸÑŸäŸÑ Ÿàÿπÿ±ÿ∂ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸÖÿπŸÇÿØÿ© ŸÖÿ´ŸÑ "2 O‚ÇÇ / 1 G (-3 O‚ÇÇ / -2 G)"
            function formatComplexValue(valueString) {
                if (!valueString) return '';
                
                // ŸÅÿµŸÑ ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ÿπŸÜ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿ®ŸäŸÜ ÿßŸÑÿ£ŸÇŸàÿßÿ≥
                const mainMatch = valueString.match(/^([^()]+)/);
                const changeMatch = valueString.match(/\(([^)]+)\)/);
                
                let mainHtml = '';
                let changeHtml = '';
                
                // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©
                if (mainMatch) {
                    const mainParts = mainMatch[1].trim().split('/');
                    mainHtml = mainParts.map(part => {
                        const [value, unit] = part.trim().split(' ');
                        return `
                            <div class="value-item">
                                <span class="value-main">${value}</span>
                                <span class="value-symbol">${unit || ''}</span>
                            </div>
                        `;
                    }).join('<span class="value-separator">/</span>');
                }
                
                // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™
                if (changeMatch) {
                    const changeParts = changeMatch[1].split('/');
                    changeHtml = changeParts.map(part => {
                        const [value, unit] = part.trim().split(' ');
                        const isPositive = value.startsWith('+');
                        const isNegative = value.startsWith('-');
                        const changeClass = isPositive ? 'value-positive' : 
                                        isNegative ? 'value-negative' : 'value-neutral';
                        
                        return `
                            <div class="value-item">
                                <span class="value-change ${changeClass}">${value}</span>
                                <span class="value-symbol">${unit || ''}</span>
                            </div>
                        `;
                    }).join('<span class="value-separator">/</span>');
                }
                
                return `
                    <div class="value-group">
                        ${mainHtml}
                    </div>
                    ${changeHtml ? `
                    <div class="value-group">
                        <span class="value-symbol">(</span>
                        ${changeHtml}
                        <span class="value-symbol">)</span>
                    </div>
                    ` : ''}
                `;
            }

            // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÇŸäŸÖ ŸÅŸä ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸÖÿ±ÿ∂
            function enhancePathogenDetailValues() {
                const detailAttributes = document.querySelectorAll('.detail-attribute-value');
                
                detailAttributes.forEach(attribute => {
                    const originalText = attribute.textContent.trim();
                    
                    // ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÇŸäŸÖ ÿßŸÑŸÖÿπŸÇÿØÿ© (ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ / Ÿàÿ£ŸÇŸàÿßÿ≥)
                    if (originalText.includes('/') && (originalText.includes('(') || originalText.includes('O‚ÇÇ') || originalText.includes('G'))) {
                        attribute.innerHTML = formatComplexValue(originalText);
                    }
                    // ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÇŸäŸÖ ÿßŸÑÿπÿßÿØŸäÿ©
                    else {
                        // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÜÿ≥ŸäŸÇ ŸÑŸÑŸÇŸäŸÖ ÿßŸÑÿπÿØÿØŸäÿ©
                        const enhancedText = originalText.replace(/(\d+\.?\d*)/g, '<span class="value-main">$1</span>');
                        attribute.innerHTML = enhancedText;
                    }
                });
            }

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπÿßŸÑÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
            downloadCompoundsBtn.addEventListener('click', () => {
                downloadJSON(compoundsData, 'BioPulse_Compounds_Data.json');
            });

            downloadPathogensBtn.addEventListener('click', () => {
                downloadJSON(pathogensData, 'BioPulse_Pathogens_Data.json');
            });

            clearCompoundsBtn.addEventListener('click', () => {
                pendingDeleteAction = function() {
                    clearAllCompoundsFromFirebase()
                        .then(() => {
                            showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ±ŸÉÿ®ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠!' : 'All compounds cleared successfully!', 'success');
                        })
                        .catch((error) => {
                            showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÖÿ≥ÿ≠: ' + error.message : 'Error clearing: ' + error.message, 'error');
                        });
                };
                showPasswordModal();
            });

            clearPathogensBtn.addEventListener('click', () => {
                pendingDeleteAction = function() {
                    clearAllPathogensFromFirebase()
                        .then(() => {
                            showAlert(currentLanguage === 'ar' ? 'ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÖÿ±ÿ∂ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠!' : 'All pathogens cleared successfully!', 'success');
                        })
                        .catch((error) => {
                            showAlert(currentLanguage === 'ar' ? 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÖÿ≥ÿ≠: ' + error.message : 'Error clearing: ' + error.message, 'error');
                        });
                };
                showPasswordModal();
            });

            // ÿ•ÿ∫ŸÑÿßŸÇ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ±
            closeTreeBtn.addEventListener('click', function() {
                evolutionTreeContainer.style.display = 'none';
            });

            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±
            confirmDeleteBtn.addEventListener('click', function() {
                if (passwordInput.value === DELETE_PASSWORD) {
                    if (pendingDeleteAction) {
                        pendingDeleteAction();
                    }
                    hidePasswordModal();
                } else {
                    showAlert(currentLanguage === 'ar' ? 'ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©!' : 'Incorrect password!', 'error');
                }
            });

            // ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ≠ÿ∞ŸÅ
            cancelDeleteBtn.addEventListener('click', function() {
                hidePasswordModal();
            });

            // ÿ•ÿ∫ŸÑÿßŸÇ ŸÜÿßŸÅÿ∞ÿ© ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ÿπŸÜÿØ ÿßŸÑŸÜŸÇÿ± ÿÆÿßÿ±ÿ¨Ÿáÿß
            passwordModal.addEventListener('click', function(e) {
                if (e.target === passwordModal) {
                    hidePasswordModal();
                }
            });

            // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ©
            languageToggle.addEventListener('click', toggleLanguage);

            // ÿ•ÿπÿßÿØÿ© ÿ±ÿ≥ŸÖ ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑÿ™ÿ∑Ÿàÿ± ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿ¨ŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
            window.addEventListener('resize', function() {
                if (evolutionTreeContainer.style.display !== 'none' && selectedPathogenId) {
                    renderEvolutionTree(selectedPathogenId);
                }
            });

            // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÑŸÑÿ®ÿ∑ÿßŸÇÿßÿ™
            document.addEventListener('mouseover', function(e) {
                if (e.target.closest('.compound-card, .pathogen-card')) {
                    e.target.closest('.compound-card, .pathogen-card').classList.add('pulse');
                }
            });

            document.addEventListener('mouseout', function(e) {
                if (e.target.closest('.compound-card, .pathogen-card')) {
                    e.target.closest('.compound-card, .pathogen-card').classList.remove('pulse');
                }
            });

            // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπÿßŸÑÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ŸÑŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©
            verifyAllCompoundsBtn.addEventListener('click', verifyAllCompounds);
            refreshDocumentationBtn.addEventListener('click', updateDocumentationCards);
            updateDangerChartBtn.addEventListener('click', updateDangerComparison);

            // ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ£ŸàŸÑŸäÿ©
            loadCompoundsFromFirebase();
            loadPathogensFromFirebase();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
            setTimeout(() => {
                if (compoundsData.length > 0) {
                    updateDocumentationCards();
                }
            }, 2000);
        });
    </script>
</body>
</html>